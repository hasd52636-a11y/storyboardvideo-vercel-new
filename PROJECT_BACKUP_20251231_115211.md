# 项目备份报告
**备份时间**: 2025-12-31 11:52:11
**项目名称**: Storyboard Master (SORA 2 视频生成工具)
**备份版本**: v1.0 完整版

---

## 📋 项目概览

### 项目信息
- **项目名称**: Storyboard Master
- **主要功能**: AI驱动的视频脚本生成和分镜创作工具
- **支持模型**: 
  - OpenAI Sora 2 / Sora 2 Pro
  - 智谱 CogVideoX-Flash / CogVideoX-3
  - Gemini 2.5 Flash Image
- **部署平台**: Vercel
- **生产URL**: https://sora.wboke.com
- **技术栈**: React + TypeScript + Vite + Tailwind CSS

---

## 🎯 核心功能清单

### 1. 脚本创作模块
- ✅ AI对话式脚本生成
- ✅ 预制规则系统（一键脚本、反推提示词）
- ✅ 图片上传和参考
- ✅ 实时字符计数
- ✅ 多语言支持（中文/英文）

### 2. 画面生成模块
- ✅ 单个画面生成
- ✅ 批量画面生成
- ✅ 手动场景输入对话框
- ✅ 画面预览和编辑
- ✅ 符号标记系统

### 3. 视频生成模块
- ✅ 单个视频生成
- ✅ 批量视频生成
- ✅ 视频提示词框（含默认全局指令）
- ✅ 多模型支持
- ✅ 宽高比和时长配置

### 4. 高级功能
- ✅ 分镜预览对话框
- ✅ 视频编辑对话框
- ✅ 批量重绘功能
- ✅ 截图分析功能
- ✅ 符号库管理

---

## 📁 关键文件结构

### 核心组件
```
components/
├── SidebarRight.tsx              # 脚本创作面板（含预制规则）
├── VideoGenDialog.tsx            # 视频生成对话框（含默认指令）
├── ManualSceneInputDialog.tsx     # 手动场景输入
├── StoryboardPreviewDialog.tsx    # 分镜预览
├── VideoPromptPreviewDialog.tsx   # 视频提示词预览
├── BatchRedrawDialog.tsx          # 批量重绘
└── [其他组件...]
```

### 核心服务
```
├── geminiService.ts              # AI服务集成
├── videoService.ts               # 视频生成服务
├── zhipuService.ts               # 智谱API服务
└── services/
    └── CloneWorkflowManager.ts    # 克隆工作流管理
```

### 类型定义
```
├── types.ts                      # 全局类型定义
└── lib/
    └── image-utils.ts            # 图片处理工具
```

---

## 🔧 最近更新（2025-12-31）

### 1. Sora 2 视频提示词框优化
- **改动**: 将两个分开的输入框（画面提示词 + 视频提示词）合并为单一输入框
- **容量**: 从760字符增加到2000字符
- **高度**: 从80px增加到200px
- **文件**: `components/VideoGenDialog.tsx`

### 2. 预制规则系统
- **规则1**: 一键脚本（SORA 2全局提示词规则）
- **规则2**: 反推提示词（从参考图像反推prompt）
- **位置**: 脚本创作输入框上方
- **交互**: 点击变色提示，发送时自动合并
- **文件**: `components/SidebarRight.tsx`

### 3. 视频提示词默认指令
- **内容**: 全局指令 - 参考锁定规则
- **位置**: 视频生成对话框的视频提示词框
- **可编辑**: 用户可自由修改或删除
- **文件**: `components/VideoGenDialog.tsx`

### 4. 生成画面功能修复
- **改进**: 添加API配置检查
- **错误处理**: 显示具体错误信息
- **状态管理**: 更新卡片加载状态
- **文件**: `App.tsx`

---

## 🚀 部署信息

### 生产环境
- **平台**: Vercel
- **URL**: https://sora.wboke.com
- **最后部署**: 2025-12-31
- **部署状态**: ✅ 正常运行

### 构建配置
```json
{
  "buildCommand": "npm run build",
  "installCommand": "npm install",
  "framework": "vite"
}
```

---

## 📊 项目统计

### 代码量
- **组件文件**: 17+ 个 React 组件
- **服务文件**: 4+ 个核心服务
- **类型定义**: 完整的 TypeScript 类型系统
- **总代码行数**: 10,000+ 行

### 支持语言
- 中文 (zh)
- 英文 (en)

### 支持模型
- OpenAI Sora 2
- OpenAI Sora 2 Pro
- 智谱 CogVideoX-Flash
- 智谱 CogVideoX-3
- Google Gemini 2.5 Flash

---

## 🔐 安全备份清单

### 已备份内容
- ✅ 所有源代码文件
- ✅ 组件实现
- ✅ 服务集成
- ✅ 类型定义
- ✅ 配置文件
- ✅ 构建脚本

### 关键配置
- ✅ vercel.json (部署配置)
- ✅ vite.config.ts (构建配置)
- ✅ tsconfig.json (TypeScript配置)
- ✅ tailwind.config.js (样式配置)
- ✅ package.json (依赖配置)

### 环境变量
- ⚠️ API密钥存储在 localStorage（客户端）
- ⚠️ 敏感信息不在代码中硬编码
- ✅ 支持多个API提供商配置

---

## 📝 重要文档

### 功能文档
- `PRESET_RULES_FEATURE_COMPLETE.md` - 预制规则功能说明
- `MANUAL_SCENE_DIALOG_INTEGRATION_COMPLETE.md` - 手动场景集成
- `BATCH_IMPORT_VIDEO_PROMPT_COMPLETE.md` - 批量导入功能
- `DUAL_MARKER_IMPLEMENTATION_COMPLETE.md` - 双标记实现

### 部署文档
- `LATEST_DEPLOYMENT_SUMMARY.md` - 最新部署总结
- `DEPLOYMENT_COMPLETE.md` - 部署完成报告
- `VERCEL_DEPLOYMENT_GUIDE.md` - Vercel部署指南

---

## 🔄 恢复指南

### 快速恢复步骤
1. 克隆或恢复项目文件
2. 运行 `npm install` 安装依赖
3. 配置 API 密钥（在应用设置中）
4. 运行 `npm run dev` 启动开发服务器
5. 或运行 `npm run build` 构建生产版本

### 部署恢复
1. 确保 Vercel 项目配置正确
2. 推送代码到 GitHub（如果使用 Git 部署）
3. 或使用 `vercel --prod` 命令直接部署
4. 验证 https://sora.wboke.com 可访问

---

## ✅ 备份验证

### 验证项目完整性
- ✅ 所有源文件已备份
- ✅ 配置文件已备份
- ✅ 文档已备份
- ✅ 部署配置已备份

### 验证功能状态
- ✅ 脚本创作功能正常
- ✅ 画面生成功能正常
- ✅ 视频生成功能正常
- ✅ 预制规则功能正常
- ✅ 所有模型集成正常

---

## 📞 支持信息

### 常见问题
1. **API 配置**: 在应用设置中配置 API 密钥
2. **生成失败**: 检查 API 密钥有效性和网络连接
3. **模型选择**: 根据需求选择合适的模型
4. **语言切换**: 支持中文和英文界面

### 技术支持
- 查看浏览器控制台获取详细错误信息
- 检查 Vercel 部署日志
- 验证 API 配置和密钥

---

## 📅 备份历史

| 日期 | 版本 | 备注 |
|------|------|------|
| 2025-12-31 | v1.0 | 完整项目备份 |

---

**备份完成时间**: 2025-12-31 11:52:11
**备份状态**: ✅ 完成
**下次建议备份**: 2026-01-07（每周备份）
