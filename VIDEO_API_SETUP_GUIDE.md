# 视频 API 配置指南

## ✅ 已完成的更新

KeySelection 组件已更新，现在包含两个标签页：
- 🖼️ **图像生成 API** - 配置 Gemini、OpenAI、智谱等
- 🎬 **视频生成 API** - 配置 Sora 2 API

## 📍 视频 API 配置位置

打开应用后，在 API 配置页面中：

1. **默认显示图像生成 API 标签**
2. **点击右侧的"🎬 视频生成 API"标签**
3. **输入 Sora 2 API 的配置信息**

## 🔧 配置步骤

### 第一步：打开应用
- 应用启动时会显示 API 配置页面

### 第二步：配置图像生成 API（可选）
- 选择 AI 服务商（Gemini、OpenAI、智谱等）
- 输入 API Key 和模型名称
- 点击"Test"验证连接

### 第三步：配置视频生成 API
1. 点击"🎬 视频生成 API"标签
2. 输入 **Base URL**
   - 示例：`https://api.xxx.com`
3. 输入 **API Key**
   - 示例：`sk-xxx...`
4. 点击"测试连接"验证
5. 看到"✓ 连接成功"表示配置正确

### 第四步：保存配置
- 点击底部"保存配置"按钮
- 进入主应用

## 📝 获取 Sora 2 API 密钥

### 方式 1：通过中转服务（推荐）

**神马 API 示例：**
1. 访问 https://shenmaapi.com
2. 注册账号
3. 在账户设置中获取：
   - Base URL: `https://api.shenmaapi.com`
   - API Key: 从账户设置复制

### 方式 2：其他中转服务
- 类似的中转服务都提供 Base URL 和 API Key
- 配置方式相同

## 🎯 使用流程

### 生成分镜图片
1. 输入剧本或创意描述
2. 点击"生成分镜"
3. 系统使用**图像生成 API**生成分镜

### 生成视频
1. 选择分镜图片
2. 点击"生成视频"
3. 输入视频提示词
4. 点击"生成"
5. 系统使用**视频生成 API**生成视频

## 💾 配置存储位置

配置会自动保存到浏览器本地存储：

```javascript
// 图像生成 API 配置
localStorage.getItem('director_canvas_api_config')

// 视频生成 API 配置
localStorage.getItem('director_canvas_video_config')
```

## 🔄 修改配置

如需修改已保存的配置：
1. 点击左侧工具栏的⚙️设置按钮
2. 修改相应的配置
3. 点击"保存配置"

## ❓ 常见问题

### Q: 视频 API 测试失败怎么办？
A: 检查以下几点：
- Base URL 是否正确（不要包含末尾的 `/`）
- API Key 是否正确
- 网络连接是否正常
- API 服务是否可用

### Q: 可以只配置视频 API 吗？
A: 可以。图像生成 API 和视频生成 API 是独立的，可以分别配置。

### Q: 如何切换不同的视频 API？
A: 修改配置后重新保存即可。新的配置会覆盖旧的。

### Q: 配置信息会被上传到服务器吗？
A: 不会。所有配置都保存在浏览器本地存储中，不会上传到任何服务器。

## 🚀 现在就开始

1. 刷新浏览器
2. 看到新的 API 配置页面
3. 配置视频 API
4. 开始生成视频！

---

**需要帮助？** 查看详细的集成指南：`VIDEO_API_INTEGRATION_GUIDE.md`
