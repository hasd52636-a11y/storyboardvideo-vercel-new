# SidebarRight.tsx 重新组织 - 测试指南

## 快速测试清单

### 1. Tab 切换测试
```
步骤:
1. 打开应用
2. 查看右侧边栏
3. 验证默认打开 'scriptCreation' Tab（✍️ 脚本创作）
4. 点击 'videoEdit' Tab（🎬 视频编辑）
5. 验证内容切换正确
6. 点击 'scriptCreation' Tab 返回
7. 验证内容恢复正确
```

### 2. scriptCreation Tab 功能测试

#### 2.1 生成配置
```
步骤:
1. 在 scriptCreation Tab 中
2. 查看生成配置区域
3. 验证分镜数量选择（1-16）
4. 使用 +/- 按钮调整分镜数量
5. 直接输入数字
6. 验证画面比例选择
7. 点击不同的比例（16:9, 4:3, 等）
8. 验证选中状态变为紫色
```

#### 2.2 对话功能
```
步骤:
1. 在 scriptCreation Tab 中
2. 在聊天输入框输入文本
3. 点击发送按钮（↑）或按 Enter
4. 验证消息出现在聊天历史中
5. 验证 AI 回复出现
6. 点击清除按钮（🗑️）
7. 验证聊天历史被清空
```

#### 2.3 图片上传功能
```
步骤:
1. 在 scriptCreation Tab 中
2. 点击图片上传按钮（📎）
3. 选择一张或多张图片
4. 验证图片预览显示
5. 验证图片计数显示（如果多张）
6. 悬停查看图片元数据
7. 使用导航按钮切换图片
8. 点击 ✕ 删除图片
```

#### 2.3 截图功能
```
步骤:
1. 在 scriptCreation Tab 中
2. 点击截图按钮（📸）
3. 验证页面被截图
4. 验证截图预览显示
5. 验证自动分析提示词
6. 验证 AI 生成描述
```

#### 2.4 智慧客服功能
```
步骤:
1. 在 scriptCreation Tab 中
2. 点击智慧客服按钮（📖 智慧客服）
3. 验证按钮变为蓝色（激活状态）
4. 输入问题并发送
5. 验证 AI 使用知识库回复
6. 再次点击按钮禁用
7. 验证按钮恢复正常状态
```

#### 2.5 使用说明功能
```
步骤:
1. 在 scriptCreation Tab 中
2. 点击使用说明按钮（📖 使用说明）
3. 验证打开完整使用指南
4. 关闭指南
```

#### 2.6 生成分镜功能
```
步骤:
1. 在 scriptCreation Tab 中
2. 进行一些对话
3. 点击生成分镜按钮
4. 验证分镜生成开始
5. 验证生成完成后显示结果
```

### 3. videoEdit Tab 功能测试

#### 3.1 生成配置
```
步骤:
1. 切换到 videoEdit Tab
2. 验证显示风格选择
3. 验证时长滑块（5-120s）
4. 验证画面比例选择
```

#### 3.2 导出分镜功能
```
步骤:
1. 在 videoEdit Tab 中
2. 选择一些分镜
3. 点击导出分镜按钮
4. 验证导出为 JPEG
5. 验证文件下载
```

#### 3.3 生成视频功能
```
步骤:
1. 在 videoEdit Tab 中
2. 选择分镜
3. 点击生成视频按钮
4. 验证视频生成开始
5. 验证生成完成
```

#### 3.4 预览提示词功能
```
步骤:
1. 在 videoEdit Tab 中
2. 点击预览提示词按钮
3. 验证模态框打开
4. 验证显示提示词内容
5. 点击中文/English 切换语言
6. 验证内容更新
7. 编辑提示词
8. 点击复制按钮
9. 验证复制到剪贴板
10. 关闭模态框
```

#### 3.5 导出提示词功能
```
步骤:
1. 在 videoEdit Tab 中
2. 点击导出提示词按钮
3. 验证文件下载
4. 验证文件内容正确
```

### 4. 响应式设计测试

#### 4.1 展开/收起
```
步骤:
1. 点击左侧的展开/收起按钮（←/→）
2. 验证边栏展开/收起
3. 验证 Tab 按钮显示图标（收起时）
4. 验证 Tab 按钮显示文本（展开时）
```

#### 4.2 深色/浅色主题
```
步骤:
1. 切换应用主题
2. 验证 scriptCreation Tab 样式更新
3. 验证 videoEdit Tab 样式更新
4. 验证所有按钮样式正确
5. 验证文本颜色对比度
```

### 5. 集成测试

#### 5.1 工作流测试
```
步骤:
1. 打开应用
2. 在 scriptCreation Tab 中进行对话
3. 生成分镜
4. 切换到 videoEdit Tab
5. 调整生成配置
6. 导出分镜
7. 生成视频
8. 导出提示词
```

#### 5.2 数据持久性测试
```
步骤:
1. 在 scriptCreation Tab 中输入文本
2. 切换到 videoEdit Tab
3. 切换回 scriptCreation Tab
4. 验证输入的文本仍在
5. 验证聊天历史保持
```

### 6. 错误处理测试

#### 6.1 图片上传错误
```
步骤:
1. 尝试上传无效的文件
2. 验证错误消息显示
3. 验证可以关闭错误消息
```

#### 6.2 API 错误
```
步骤:
1. 在没有 API 密钥的情况下发送消息
2. 验证错误消息显示
3. 验证应用不崩溃
```

### 7. 性能测试

#### 7.1 大量消息
```
步骤:
1. 发送多条消息（10+）
2. 验证滚动流畅
3. 验证没有性能下降
```

#### 7.2 大量图片
```
步骤:
1. 上传多张图片（5+）
2. 验证预览加载快速
3. 验证导航流畅
```

## 预期结果

### scriptCreation Tab
- ✅ 对话功能正常工作
- ✅ 图片上传和截图功能正常
- ✅ 智慧客服和使用说明可访问
- ✅ 画面比例选择正常
- ✅ 生成分镜按钮可用

### videoEdit Tab
- ✅ 生成配置可调整
- ✅ 导出分镜功能正常
- ✅ 生成视频功能正常
- ✅ 预览和导出提示词功能正常

## 常见问题排查

### 问题 1: Tab 不切换
**解决方案**: 检查 toggleSidebar 函数是否正确调用

### 问题 2: 功能不显示
**解决方案**: 检查 activeTab 状态是否正确更新

### 问题 3: 样式不正确
**解决方案**: 检查 theme 变量是否正确传递

### 问题 4: 消息不发送
**解决方案**: 检查 handleSendChat 函数是否正确调用

## 测试环境要求

- Node.js 16+
- React 18+
- TypeScript 4.5+
- 现代浏览器（Chrome, Firefox, Safari, Edge）

## 测试工具

- 浏览器开发者工具
- React DevTools
- 网络监控工具

## 测试报告模板

```
测试日期: ____
测试人员: ____
浏览器: ____
操作系统: ____

测试项目 | 状态 | 备注
---------|------|-----
Tab 切换 | ✅/❌ | 
对话功能 | ✅/❌ | 
图片上传 | ✅/❌ | 
截图功能 | ✅/❌ | 
智慧客服 | ✅/❌ | 
使用说明 | ✅/❌ | 
画面比例 | ✅/❌ | 
生成分镜 | ✅/❌ | 
生成配置 | ✅/❌ | 
导出分镜 | ✅/❌ | 
生成视频 | ✅/❌ | 
预览提示词 | ✅/❌ | 
导出提示词 | ✅/❌ | 

总体状态: ✅ 通过 / ❌ 失败
```

## 回归测试

在每次更新后运行以下测试:
1. Tab 切换测试
2. 对话功能测试
3. 生成分镜测试
4. 导出功能测试
5. 集成工作流测试
