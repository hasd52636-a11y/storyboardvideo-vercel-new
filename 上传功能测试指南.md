# 上传功能测试指南

## 快速测试

### 测试 1: 参考主体上传

**步骤**:
1. 点击左侧边栏的 📥 按钮
2. 选择 "参考主体" (红色选项)
3. 选择一张图片文件
4. 验证:
   - [ ] 图片显示在画布上
   - [ ] 图片标记为 "REF"
   - [ ] 图片尺寸为 214×380px

**预期结果**: ✅ 参考主体正确显示

---

### 测试 2: 分镜图上传

**步骤**:
1. 点击左侧边栏的 📥 按钮
2. 选择 "导入分镜图片" (紫色选项)
3. 选择 1-6 张图片文件
4. 验证:
   - [ ] 所有图片都显示在画布上
   - [ ] 图片排列成 4 列网格
   - [ ] 每张图片尺寸为 380×214px
   - [ ] 图片编号正确 (SC-01, SC-02, ...)

**预期结果**: ✅ 分镜图正确显示

---

### 测试 3: 文件大小限制

**步骤**:
1. 准备一个大于 5MB 的图片文件
2. 尝试上传
3. 验证:
   - [ ] 显示警告: "文件 '{name}' 超过 5MB 限制，已跳过"
   - [ ] 文件未被添加到画布

**预期结果**: ✅ 显示警告，文件被拒绝

---

### 测试 4: 参考主体替换

**步骤**:
1. 上传第一个参考主体
2. 再上传第二个参考主体
3. 验证:
   - [ ] 第一个参考主体被删除
   - [ ] 只显示第二个参考主体

**预期结果**: ✅ 参考主体被正确替换

---

### 测试 5: 分镜图限制

**步骤**:
1. 尝试上传 8 张分镜图
2. 验证:
   - [ ] 只有前 6 张被添加
   - [ ] 后 2 张被忽略

**预期结果**: ✅ 只添加前 6 张

---

### 测试 6: 并发处理

**步骤**:
1. 同时上传 6 张分镜图
2. 在上传过程中尝试操作 UI
3. 验证:
   - [ ] UI 不卡顿
   - [ ] 可以继续操作
   - [ ] 所有文件都被正确处理

**预期结果**: ✅ 并发处理正常，UI 流畅

---

### 测试 7: 导出功能

**步骤**:
1. 上传参考主体和分镜图
2. 选择分镜图
3. 点击 "导出分镜图 (JPEG)"
4. 验证:
   - [ ] 导出成功
   - [ ] JPEG 包含参考主体（左侧，红色边框）
   - [ ] JPEG 包含分镜图（右侧，蓝色边框）
   - [ ] 场景编号正确

**预期结果**: ✅ 导出正确

---

## 详细测试场景

### 场景 1: 完整工作流

```
1. 上传参考主体 (1张)
   ↓
2. 上传分镜图 (4张)
   ↓
3. 选择分镜图
   ↓
4. 导出 JPEG
   ↓
5. 验证导出结果
```

**验证清单**:
- [ ] 参考主体显示正确
- [ ] 分镜图显示正确
- [ ] 导出的 JPEG 包含所有内容
- [ ] 编号和布局正确

---

### 场景 2: 错误处理

```
1. 上传超大文件 (>5MB)
   ↓
2. 显示警告
   ↓
3. 上传有效文件
   ↓
4. 验证有效文件被添加
```

**验证清单**:
- [ ] 警告信息清晰
- [ ] 无效文件被拒绝
- [ ] 有效文件被接受

---

### 场景 3: 多语言支持

```
1. 切换到英文
   ↓
2. 点击上传按钮
   ↓
3. 验证菜单文本为英文
   ↓
4. 上传文件
   ↓
5. 验证提示信息为英文
```

**验证清单**:
- [ ] 菜单文本正确
- [ ] 提示信息正确
- [ ] 错误信息正确

---

## 性能测试

### 测试: 大量文件上传

**步骤**:
1. 准备 6 张分镜图
2. 同时上传所有文件
3. 记录上传时间
4. 验证 UI 响应性

**预期结果**:
- ✅ 上传时间 < 5 秒
- ✅ UI 保持响应
- ✅ 所有文件都被处理

---

## 浏览器兼容性测试

| 浏览器 | 版本 | 状态 | 备注 |
|--------|------|------|------|
| Chrome | 最新 | ✅ | 完全支持 |
| Firefox | 最新 | ✅ | 完全支持 |
| Safari | 最新 | ✅ | 完全支持 |
| Edge | 最新 | ✅ | 完全支持 |

---

## 常见问题

**Q: 上传后图片没有显示？**
A: 
1. 检查浏览器控制台是否有错误
2. 确保文件大小 < 5MB
3. 确保文件格式是图片
4. 尝试刷新页面

**Q: 上传很慢？**
A:
1. 检查网络连接
2. 尝试上传较小的文件
3. 减少同时上传的文件数量

**Q: 上传后位置不对？**
A:
1. 这是正常的，图片会自动排列
2. 可以拖拽图片调整位置

**Q: 能上传多少张图片？**
A:
- 参考主体: 最多 1 张
- 分镜图: 最多 6 张
- 可以分批上传

---

## 测试报告模板

```
测试日期: ____年____月____日
测试人员: ________________
浏览器: ________________
操作系统: ________________

测试项目 | 预期结果 | 实际结果 | 状态
---------|---------|---------|-----
参考主体上传 | 显示正确 | _________ | [ ]
分镜图上传 | 显示正确 | _________ | [ ]
文件大小限制 | 显示警告 | _________ | [ ]
参考主体替换 | 替换成功 | _________ | [ ]
分镜图限制 | 只取前6张 | _________ | [ ]
并发处理 | UI流畅 | _________ | [ ]
导出功能 | 导出成功 | _________ | [ ]

总体评价: ________________
问题描述: ________________
建议: ________________
```

---

## 快速检查清单

部署后快速验证:

- [ ] 上传按钮可见
- [ ] 菜单显示正确
- [ ] 参考主体上传正常
- [ ] 分镜图上传正常
- [ ] 导出功能正常
- [ ] 没有控制台错误

---

## 支持

如有问题，请:
1. 查看浏览器控制台错误
2. 检查网络连接
3. 尝试清除浏览器缓存
4. 联系开发团队

