é€‚ç”¨èŒƒå›´ï¼šâ™¥ æ‰€æœ‰æ¨¡å‹ #
API ç»Ÿä¸€è¯·æ±‚æ ¼å¼ #
æ‰€æœ‰æ¨¡å‹ï¼ˆåŒ…æ‹¬éOpenAIæ¨¡å‹ï¼‰çš„è¯·æ±‚æ ¼å¼å·²ç»Ÿä¸€ä¸ºOpenAIæ ¼å¼ã€‚

åŠŸèƒ½ç‰¹ç‚¹ #
ä½¿ç”¨OpenAIè¯·æ±‚æ ¼å¼å¯è°ƒç”¨æ‰€æœ‰æ¨¡å‹ï¼ˆClaudeã€Geminiã€Doubaoã€Qwenç­‰ï¼‰

æ”¯æŒç›´æ¥ä½¿ç”¨OpenAI SDKè°ƒç”¨ä»»æ„æ¨¡å‹

åŸºç¡€ä¿¡æ¯ #
Base URL: https://api.whatai.cc

è®¤è¯æ–¹å¼: API Key (æ›¿æ¢ä¸º******)

Pythonç¤ºä¾‹ä»£ç  #

import openai

# é…ç½®APIå¯†é’¥
openai.api_key = "******"  # æ›¿æ¢ä¸ºä½ çš„å®é™…APIå¯†é’¥
openai.api_base = "https://api.whatai.cc"  # è®¾ç½®APIåŸºç¡€åœ°å€

# è°ƒç”¨ç¤ºä¾‹ï¼ˆä»¥Claudeæ¨¡å‹ä¸ºä¾‹ï¼‰
response = openai.ChatCompletion.create(
    model="claude",  # æŒ‡å®šæ¨¡å‹åç§°
    messages=[
        {"role": "user", "content": "ä½ å¥½"}
    ]
)

print(response.choices[0].message.content)

æ³¨æ„ï¼šå®é™…ä½¿ç”¨æ—¶è¯·å°†******æ›¿æ¢ä¸ºä½ çš„çœŸå®APIå¯†é’¥


æ™®é€šæ–‡æœ¬å¯¹è¯ï¼ˆéæµï¼‰ #
åŸºç¡€ä¿¡æ¯ #
æ¥å£åœ°å€: https://api.whatai.cc

è®¤è¯æ–¹å¼: Bearer Token (API Key)

æ™®é€šå¯¹è¯æ¥å£ #
POST è¯·æ±‚ç¤ºä¾‹

import requests
import json

# é…ç½®APIå‚æ•°
url = "https://api.whatai.cc/v1/chat/completions"  # APIç«¯ç‚¹
payload = {
    "model": "gpt-4o-mini",  # æŒ‡å®šæ¨¡å‹
    "messages": [
        {
            "role": "system",
            "content": "You are a helpful assistant."
        },
        {
            "role": "user",
            "content": "å‘¨æ ‘äººå’Œé²è¿…æ˜¯å…„å¼Ÿå—ï¼Ÿ"
        }
    ]
}
headers = {
    'Accept': 'application/json',
    'Authorization': 'sk-******',  # æ›¿æ¢ä¸ºä½ çš„API Key
    'User-Agent': 'xxx/1.0.0',
    'Content-Type': 'application/json'
}

# å‘é€è¯·æ±‚
response = requests.post(url, headers=headers, data=json.dumps(payload))
print(response.text)

ä½¿ç”¨OpenAIå®˜æ–¹SDK #

from openai import OpenAI

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = OpenAI(
    api_key="sk-******",  # æ›¿æ¢ä¸ºä½ çš„API Key
    base_url="https://api.whatai.cc/v1"  # APIä¸­è½¬åœ°å€
)

# åˆ›å»ºå¯¹è¯
chat_completion = client.chat.completions.create(
    messages=[
        {
            "role": "user",
            "content": "å‘¨æ ‘äººå’Œé²è¿…æ˜¯å…„å¼Ÿå—ï¼Ÿ",
        }
    ],
    model="o1",  # æŒ‡å®šæ¨¡å‹
)

print(chat_completion)

æ³¨æ„äº‹é¡¹ #
è¯·å¦¥å–„ä¿ç®¡API Keyï¼Œä¸è¦æ³„éœ²

æ‰€æœ‰è¯·æ±‚å¿…é¡»é€šè¿‡HTTPSå‘é€

å“åº”æ ¼å¼ä¸ºJSON

æ™®é€šæ–‡æœ¬å¯¹è¯ï¼ˆæµå¼è¾“å‡ºï¼‰ #
åŸºç¡€ä¿¡æ¯ #
æ¥å£åœ°å€: https://api.whatai.cc

è®¤è¯æ–¹å¼: Bearer Token (API Key)

è¯·æ±‚å‚æ•° #
å‚æ•°	ç±»å‹	è¯´æ˜
model	string	æ¨¡å‹åç§°(å¦‚gpt-4o-mini)
stream	boolean	æ˜¯å¦å¼€å¯æµå¼è¾“å‡º
messages	array	å¯¹è¯æ¶ˆæ¯åˆ—è¡¨
Python è¯·æ±‚ç¤ºä¾‹ #

import json
import requests

# é…ç½®è¯·æ±‚å‚æ•°
url = "https://api.whatai.cc/v1/chat/completions"
headers = {
    "Authorization": "Bearer sk-******",  # æ›¿æ¢ä¸ºä½ çš„API Key
    "Content-Type": "application/json"
}
payload = {
    "model": "gpt-4o-mini",
    "stream": True,  # å¼€å¯æµå¼è¾“å‡º
    "messages": [
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "å‘¨æ ‘äººå’Œé²è¿…æ˜¯å…„å¼Ÿå—ï¼Ÿ"},
    ]
}

# å‘é€è¯·æ±‚å¹¶å¤„ç†æµå¼å“åº”
response = requests.post(url, headers=headers, json=payload, stream=True)
buffer = ""

for chunk in response.iter_content(chunk_size=None):
    if chunk:
        buffer += chunk.decode("utf-8")
        while "\n" in buffer:
            line, buffer = buffer.split("\n", 1)
            if not line.strip():  # è·³è¿‡ç©ºè¡Œ
                continue
                
            if line.startswith("data: "):
                data_line = line[6:].strip()  # å»é™¤"data: "å‰ç¼€
                
                if data_line == "[DONE]":  # æµå¼ç»“æŸæ ‡è®°
                    break
                    
                try:
                    data = json.loads(data_line)
                    # æå–å¹¶æ‰“å°å“åº”å†…å®¹
                    content = data["choices"][0]["delta"].get("content", "")
                    print(content, end="", flush=True)
                except json.JSONDecodeError:
                    # å¤„ç†ä¸å®Œæ•´JSONæ•°æ®
                    buffer = line + "\n" + buffer
                    break


æ³¨æ„äº‹é¡¹ #
è¯·å¦¥å–„ä¿ç®¡API Key

å»ºè®®ä½¿ç”¨HTTPSåè®®

å“åº”æ ¼å¼ä¸ºJSON

å›ºå®šæ ¼å¼åŒ–è¾“å‡ºJson #
æ ¼å¼åŒ–è¾“å‡º æ¥å£è¯´æ˜ #
é€šè¿‡OpenAI APIè·å–äº§å“ä¿¡æ¯ï¼Œè¿”å›JSONæ ¼å¼æ•°æ®ã€‚

è¯·æ±‚åœ°å€ #
POST https://api.whatai.cc/v1/chat/completions

è¯·æ±‚å‚æ•° #
Headers #
å‚æ•°å	ç±»å‹	å¿…å¡«	è¯´æ˜
Authorization	string	æ˜¯	APIå¯†é’¥ï¼Œæ ¼å¼: Bearer ******
Content-Type	string	æ˜¯	å›ºå®šå€¼: application/json
Body #

{
  "model": "gpt-4o-2024-08-06",
  "messages": [
    {
      "role": "system",
      "content": "æ ¹æ®ç»™å‡ºçš„äº§å“è¿›è¡Œåˆ†æï¼ŒæŒ‰jsonæ ¼å¼ç”¨ä¸­æ–‡å›ç­”,json format:product_name, price, description."
    },
    {
      "role": "user",
      "content": "äº§å“æè¿°"
    }
  ],
  "response_format": {
    "type": "json_object"
  }
}

Pythonç¤ºä¾‹ä»£ç  #

from pydantic import BaseModel
from openai import OpenAI
from dotenv import load_dotenv
import json
from textwrap import dedent

# åŠ è½½ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ API key ç­‰é…ç½®ä¿¡æ¯
load_dotenv()

# è®¾ç½® OpenAI API çš„å·¥å‚åç§°ï¼Œé»˜è®¤ä¸º "openai"
factory = "openai"

# åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯ï¼Œä¼ å…¥ API key å’Œ base URL
client = OpenAI(
    api_key="sk-*******************************",  # æ›¿æ¢ä¸ºä½ çš„ API key
    base_url="https://api.whatai.cc/v1/"   # è¿™é‡Œæ˜¯ base urlï¼Œæ³¨æ„è¿™é‡Œéœ€è¦ /v1/
)

# å®šä¹‰ä¸€ä¸ªäº§å“ä¿¡æ¯ç±»ï¼Œç”¨äºè§£æ API è¿”å›çš„æ•°æ®
class ProductInfo(BaseModel):
    product_name: str  # äº§å“åç§°ï¼Œå­—ç¬¦ä¸²ç±»å‹
    price: float  # ä»·æ ¼ï¼Œæµ®ç‚¹æ•°ç±»å‹
    description: str  # äº§å“æè¿°ï¼Œå­—ç¬¦ä¸²ç±»å‹

# å®šä¹‰ä¸€ä¸ªæç¤ºä¿¡æ¯ï¼Œç”¨äºè¯·æ±‚æ¨¡å‹è¿”å› JSON æ ¼å¼çš„äº§å“ä¿¡æ¯
product_prompt = '''æ ¹æ®ç»™å‡ºçš„äº§å“è¿›è¡Œåˆ†æï¼ŒæŒ‰jsonæ ¼å¼ç”¨ä¸­æ–‡å›ç­”,json format:product_name, price, description.'''

# è·å–äº§å“ä¿¡æ¯çš„å‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·çš„é—®é¢˜
def get_product_info(question: str):
    # ä½¿ç”¨ OpenAI å®¢æˆ·ç«¯è¿›è¡ŒèŠå¤©æ¨¡å‹çš„è¯·æ±‚
    completion = client.beta.chat.completions.parse(
        model="gpt-4o-2024-08-06",  # æŒ‡å®šä½¿ç”¨çš„æ¨¡å‹
        messages=[
            {"role": "system", "content": dedent(product_prompt)},  # å‘é€ç³»ç»Ÿæ¶ˆæ¯ï¼Œè®¾ç½®æ¨¡å‹çš„è¡Œä¸º
            {"role": "user", "content": question},  # å‘é€ç”¨æˆ·æ¶ˆæ¯ï¼Œç”¨æˆ·æå‡ºé—®é¢˜
        ],
        response_format=ProductInfo,  # æŒ‡å®šè¿”å›çš„æ•°æ®æ ¼å¼ä¸º ProductInfo
    )

    # è¿”å›æ¨¡å‹è§£æçš„ç¬¬ä¸€ä¸ªé€‰é¡¹çš„æ¶ˆæ¯ç»“æœ
    return completion.choices[0].message.parsed

# åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„äº§å“ä¿¡æ¯å­—å…¸
product_inform = {}

# å®šä¹‰å°†è§£æçš„ç»“æœè½¬æ¢ä¸º JSON çš„å‡½æ•°
def transform2JSON(parsed_result):
    # print(parsed_result)  # æ‰“å°è§£æç»“æœ

    # å°†è§£æçš„ç»“æœå­˜å‚¨åˆ°å­—å…¸ä¸­
    product_inform["product_name"] = parsed_result.product_name
    product_inform["price"] = parsed_result.price
    product_inform["description"] = parsed_result.description

    # å°†å­—å…¸è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œensure_ascii=False å…è®¸ä¸­æ–‡å­—ç¬¦æ­£å¸¸æ˜¾ç¤º
    return json.dumps(product_inform, ensure_ascii=False, indent=4)

# å®šä¹‰ç”¨æˆ·è¾“å…¥çš„é—®é¢˜ï¼Œå³ä¸€ä¸ªäº§å“ä¿¡æ¯çš„æè¿°
question = "75å¯¸å°ç±³ç”µè§†æœº"

# è°ƒç”¨å‡½æ•°è·å–äº§å“ä¿¡æ¯
result = get_product_info(question)


# å°†è§£æç»“æœè½¬æ¢ä¸º JSON æ ¼å¼å¹¶æ‰“å°
json_result = transform2JSON(result)
print(json_result)

è¿”å›ç¤ºä¾‹ #

{
    "product_name": "å°ç±³ç”µè§†75å¯¸",
    "price": 4999.0,
    "description": "4Kè¶…é«˜æ¸…ç”»è´¨ï¼Œæ”¯æŒHDRï¼Œå†…ç½®å°çˆ±åŒå­¦è¯­éŸ³åŠ©æ‰‹"
}

ç½‘ç»œå›¾ç‰‡è§£æ #
æ¥å£è¯´æ˜ #
é€šè¿‡å¤šæ¨¡æ€AIæ¨¡å‹åˆ†æå›¾ç‰‡å†…å®¹ï¼Œç†è§£å›¾ç‰‡ã€æå–å›¾ç‰‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬OCRåŠŸèƒ½ã€‚

ä¸»æµå›¾ç‰‡åˆ†ææ¨¡å‹ #
æ¨¡å‹åç§°	æè¿°
gpt-4o	ç›®å‰å›¾ç‰‡åˆ†æè°ƒç”¨é‡æœ€å¤§çš„æ¨¡å‹ï¼Œç¨³å®šã€å¹¶å‘é«˜
gemini-2.5-flash	è°·æ­Œæ——èˆ°æ¨¡å‹ï¼Œé€Ÿåº¦å¿«ï¼Œæ€§ä»·æ¯”å¥½
claude-sonnet-4-20250514	å›¾ç‰‡åˆ†æåšçš„ä¸é”™ï¼Œä½†æ€§ä»·æ¯”ç•¥å·®
doubao-1.5-vision-pro-250328	å›½å†…å›¾ç‰‡åˆ†æä¸»æµæ¨¡å‹ï¼Œæ€§ä»·æ¯”å¥½ï¼Œç¨³å®šã€å¹¶å‘é«˜
åŸºç¡€ä¿¡æ¯ #
Base URL: https://api.whatai.cc

è¯·æ±‚æ–¹å¼: POST

Content-Type: application/json

æ¥å£åœ°å€ #
POST /v1/chat/completions

è¯·æ±‚å¤´ #
å‚æ•°	ç±»å‹	å¿…å¡«	è¯´æ˜
Authorization	string	æ˜¯	Bearer tokenï¼Œæ ¼å¼ï¼šBearer ******
Content-Type	string	æ˜¯	å›ºå®šå€¼ï¼šapplication/json
User-Agent	string	å¦	å®¢æˆ·ç«¯æ ‡è¯†
è¯·æ±‚å‚æ•° #
{
  "model": "gemini-2.0-flash-thinking-exp-1219",
  "messages": [
    {
      "role": "system",
      "content": [
        {"type": "text", "text": "ä½ æ˜¯ä¸€ä¸ªå›¾ç‰‡åˆ†æåŠ©æ‰‹ã€‚"}
      ]
    },
    {
      "role": "user",
      "content": [
        {
          "type": "image_url",
          "image_url": {
            "url": "å›¾ç‰‡URL"
          }
        },
        {
          "type": "text",
          "text": "åˆ†ææç¤ºè¯"
        }
      ]
    }
  ],
  "temperature": 0.1,
  "user": "whatai"
}

å‚æ•°è¯´æ˜ #
å‚æ•°	ç±»å‹	å¿…å¡«	è¯´æ˜
model	string	æ˜¯	æ¨¡å‹åç§°ï¼Œæ¨èï¼šgemini-2.5-flash æˆ– gpt-4o
messages	array	æ˜¯	æ¶ˆæ¯å†…å®¹æ•°ç»„
temperature	float	å¦	ç”Ÿæˆæ–‡æœ¬çš„éšæœºæ€§ï¼Œ0-1ä¹‹é—´
user	string	å¦	ç”¨æˆ·æ ‡è¯†
Python è°ƒç”¨ç¤ºä¾‹ #

import requests

# APIé…ç½®
BASE_URL = "https://api.whatai.cc/"
API_ENDPOINT = BASE_URL + "v1/chat/completions"
API_KEY = "sk-******"  # æ›¿æ¢ä¸ºä½ çš„APIå¯†é’¥
IMAGE_URL = "https://api.whatai.cc/111.jpg"  # æ›¿æ¢ä¸ºä½ çš„å›¾ç‰‡URL

def analyze_image(image_url, prompt):
    """
    å›¾ç‰‡åˆ†æå‡½æ•°
    :param image_url: å›¾ç‰‡URL
    :param prompt: åˆ†ææç¤ºè¯
    :return: åˆ†æç»“æœæ–‡æœ¬
    """
    payload = {
        "model": "gemini-2.0-flash-thinking-exp-1219",
        "messages": [
            {
                "role": "system",
                "content": [{"type": "text", "text": "ä½ æ˜¯ä¸€ä¸ªå›¾ç‰‡åˆ†æåŠ©æ‰‹ã€‚"}]
            },
            {
                "role": "user",
                "content": [
                    {"type": "image_url", "image_url": {"url": image_url}},
                    {"type": "text", "text": prompt}
                ]
            }
        ],
        "temperature": 0.1
    }
    
    headers = {
        "Content-Type": "application/json",
        "Authorization": f"Bearer {API_KEY}"
    }

    try:
        response = requests.post(API_ENDPOINT, headers=headers, json=payload)
        response.raise_for_status()
        return response.json()["choices"][0]["message"]["content"]
    except Exception as e:
        print(f"è¯·æ±‚å¤±è´¥: {e}")
        return None

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    result = analyze_image(IMAGE_URL, "è¯·æè¿°è¿™å¼ å›¾ç‰‡çš„å†…å®¹")
    if result:
        print("åˆ†æç»“æœ:", result)

å¸¸è§é”™è¯¯ç  #
çŠ¶æ€ç 	è¯´æ˜
400	è¯·æ±‚å‚æ•°é”™è¯¯ï¼Œçœ‹çœ‹å›¾ç‰‡æ˜¯ä¸æ˜¯å¤ªå¤§äº†
500	æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

æœ¬åœ°å›¾ç‰‡è§£æ #
æ¥å£è¯´æ˜ #
é€šè¿‡å¤šæ¨¡æ€AIæ¨¡å‹åˆ†æå›¾ç‰‡å†…å®¹ï¼Œæ”¯æŒOCRå’Œå›¾ç‰‡ä¿¡æ¯æå–åŠŸèƒ½ã€‚

ä¸»æµå›¾ç‰‡åˆ†ææ¨¡å‹

æ¨¡å‹åç§°	æè¿°
gpt-4o	ç›®å‰å›¾ç‰‡åˆ†æè°ƒç”¨é‡æœ€å¤§çš„æ¨¡å‹ï¼Œç¨³å®šã€å¹¶å‘é«˜
gemini-2.5-flash	è°·æ­Œæ——èˆ°æ¨¡å‹ï¼Œé€Ÿåº¦å¿«ï¼Œæ€§ä»·æ¯”å¥½
claude-sonnet-4-20250514	å›¾ç‰‡åˆ†æåšçš„ä¸é”™ï¼Œä½†æ€§ä»·æ¯”ç•¥å·®
doubao-1.5-vision-pro-250328	å›½å†…å›¾ç‰‡åˆ†æä¸»æµæ¨¡å‹ï¼Œæ€§ä»·æ¯”å¥½ï¼Œç¨³å®šã€å¹¶å‘é«˜
æœ¬åœ°å›¾ç‰‡åˆ†æé¢„å¤„ç† #
éœ€è¦å…ˆæŠŠæœ¬åœ°å›¾ç‰‡è½¬ä¸º base64 å†æäº¤ç»™æ¨¡å‹ã€‚

å‚æ•°è¯´æ˜ #
model: æŒ‡å®šä½¿ç”¨çš„AIæ¨¡å‹

messages: åŒ…å«ç”¨æˆ·æŒ‡ä»¤å’Œå›¾ç‰‡æ•°æ®

temperature: æ§åˆ¶è¾“å‡ºéšæœºæ€§(0-1)

image_url: æ”¯æŒBase64ç¼–ç çš„æœ¬åœ°å›¾ç‰‡æˆ–ç½‘ç»œå›¾ç‰‡URL

è¯·æ±‚ç¤ºä¾‹ #

import base64
import requests

def encode_image(image_path):
    """å°†æœ¬åœ°å›¾ç‰‡ç¼–ç ä¸ºBase64å­—ç¬¦ä¸²"""
    with open(image_path, "rb") as image_file:
        return base64.b64encode(image_file.read()).decode("utf-8")

# APIé…ç½®
BASE_URL = "https://api.whatai.cc/"
API_ENDPOINT = BASE_URL + "v1/chat/completions"
API_KEY = "sk-******"  # æ›¿æ¢ä¸ºä½ çš„APIå¯†é’¥

# å‡†å¤‡è¯·æ±‚æ•°æ®
image_data = encode_image("example.png")  # æœ¬åœ°å›¾ç‰‡è·¯å¾„

payload = {
    "model": "gpt-4o",  # æŒ‡å®šåˆ†ææ¨¡å‹
    "messages": [
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "è¯·åˆ†æå›¾ç‰‡å†…å®¹"},
                {
                    "type": "image_url",
                    "image_url": {
                        "url": f"data:image/png;base64,{image_data}"
                    }
                }
            ]
        }
    ],
    "temperature": 0.1
}

headers = {
    "Content-Type": "application/json",
    "Authorization": f"Bearer {API_KEY}"
}

# å‘é€è¯·æ±‚
response = requests.post(API_ENDPOINT, headers=headers, json=payload)
print(response.json())  # è¾“å‡ºå“åº”ç»“æœ

æ³¨æ„äº‹é¡¹ #
å›¾ç‰‡éœ€å°äº20MB

æ”¯æŒPNG/JPEGæ ¼å¼ï¼›éæ™®é€šæ‰©å±•åçš„å›¾ç‰‡ï¼ˆä¾‹å¦‚.fileï¼‰è¯·å…ˆå¤„ç†æˆbase64å†ç»™æ¨¡å‹ã€‚

å“åº”æ—¶é—´å–å†³äºå›¾ç‰‡å¤§å°å’Œæ¨¡å‹é€‰æ‹©


å‡½æ•°è°ƒç”¨FunctionCall #
æ¦‚å¿µä»‹ç» #
å‡½æ•°è°ƒç”¨(Function Calling\Tools Calling)æ˜¯AIå¤§æ¨¡å‹çš„ä¸€ç§èƒ½åŠ›ã€‚å…è®¸å¤§è¯­è¨€æ¨¡å‹åœ¨å¯¹è¯è¿‡ç¨‹ä¸­è°ƒç”¨å¤–éƒ¨å‡½æ•°/å·¥å…·ã€‚å½“ç”¨æˆ·æé—®éœ€è¦å®æ—¶æ•°æ®(å¦‚å¤©æ°”ã€è‚¡ç¥¨ç­‰)æ—¶ï¼Œæ¨¡å‹ä¼šè¿”å›å‡½æ•°è°ƒç”¨è¯·æ±‚ï¼Œå¼€å‘è€…å¯ä»¥åœ¨åç«¯æ‰§è¡Œç›¸åº”å‡½æ•°å¹¶è¿”å›ç»“æœã€‚

API åŸºç¡€ä¿¡æ¯ #
è¯·æ±‚åœ°å€: https://api.whatai.cc/v1/chat/completions

è¯·æ±‚æ–¹æ³•: POST

è®¤è¯æ–¹å¼: Bearer Token

è¯·æ±‚ç¤ºä¾‹ #

import http.client
import json

# åˆ›å»ºHTTPSè¿æ¥
conn = http.client.HTTPSConnection("api.whatai.cc")

# æ„é€ è¯·æ±‚ä½“
payload = json.dumps({
    "model": "gpt-4o",  # æŒ‡å®šæ¨¡å‹
    "max_tokens": 300,  # æœ€å¤§è¿”å›tokenæ•°
    "temperature": 0.8,  # ç”Ÿæˆç»“æœçš„éšæœºæ€§æ§åˆ¶
    "stream": False,  # æ˜¯å¦æµå¼è¾“å‡º
    "messages": [{
        "role": "user",
        "content": "ä¸Šæµ·ä»Šå¤©å‡ åº¦ï¼Ÿ"  # ç”¨æˆ·æé—®
    }],
    "tools": [{  # å®šä¹‰å¯ç”¨å·¥å…·
        "type": "function",
        "function": {
            "name": "get_current_weather",  # å‡½æ•°åç§°
            "description": "è·å¾—å¤©æ°”ä¿¡æ¯",  # åŠŸèƒ½æè¿°
            "parameters": {  # å‚æ•°å®šä¹‰
                "type": "object",
                "properties": {
                    "location": {  # å¿…å¡«å‚æ•°ï¼šåœ°ç‚¹
                        "type": "string",
                        "description": "åŸå¸‚å’Œå·åï¼Œä¾‹å¦‚ï¼šä¸Šæµ·, ä¸­å›½"
                    },
                    "unit": {  # å¯é€‰å‚æ•°ï¼šæ¸©åº¦å•ä½
                        "type": "string",
                        "enum": ["celsius", "fahrenheit"]
                    }
                },
                "required": ["location"]  # å¿…å¡«å‚æ•°åˆ—è¡¨
            }
        }
    }]
})

# è¯·æ±‚å¤´è®¾ç½®
headers = {
    "Accept": "application/json",
    "Authorization": "Bearer sk-**********************",  # æ›¿æ¢ä¸ºä½ çš„ API ä»¤ç‰Œ
    "Content-Type": "application/json"
}

# å‘é€è¯·æ±‚
conn.request("POST", "/v1/chat/completions", payload, headers)

# è·å–å“åº”
res = conn.getresponse()
data = res.read()

# è¾“å‡ºç»“æœ
print(data.decode("utf-8"))

å“åº”å¤„ç† #
å½“ç”¨æˆ·æé—®éœ€è¦è°ƒç”¨å‡½æ•°æ—¶ï¼ŒAPIä¼šè¿”å›åŒ…å«å‡½æ•°è°ƒç”¨ä¿¡æ¯çš„JSONå“åº”ã€‚å¼€å‘è€…éœ€è¦ï¼š

è§£æå“åº”ä¸­çš„å‡½æ•°è°ƒç”¨è¯·æ±‚

åœ¨åç«¯æ‰§è¡Œå¯¹åº”å‡½æ•°

å°†å‡½æ•°ç»“æœå†æ¬¡å‘é€ç»™APIè·å–æœ€ç»ˆå›ç­”

æ³¨æ„äº‹é¡¹ #
è¯·å¦¥å–„ä¿ç®¡APIå¯†é’¥ï¼Œä¸è¦æ³„éœ²

å‡½æ•°å®šä¹‰ä¸­çš„descriptionå¾ˆé‡è¦ï¼Œä¼šå½±å“æ¨¡å‹æ˜¯å¦/å¦‚ä½•è°ƒç”¨è¯¥å‡½æ•°

æ¸©åº¦å‚æ•°(temperature)æ§åˆ¶ç”Ÿæˆç»“æœçš„éšæœºæ€§ï¼Œå€¼è¶Šå¤§ç»“æœè¶Šå¤šæ ·

Tools åœºæ™¯ç¤ºä¾‹ #
ä¾‹å¦‚

ç”¨æˆ·æé—®ï¼šâ€œåŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿâ€

æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå·¥å…· get_weather(city: string)

get_weather å‡½æ•°éœ€è¦ç”¨æˆ·å¼€å‘è€…è‡ªå·±å®ç°

âœ… ç¬¬ä¸€æ­¥ï¼šå‘é€ç”¨æˆ·æé—® + å·¥å…·å®šä¹‰ #

curl --location --request POST 'https://api.whatai.cc/v1/chat/completions' \
--header 'Authorization: Bearer $API_KEY' \
--header 'Content-Type: application/json' \
--data-raw '{
    "model": "gpt-4o",
    "messages": [
        {
            "role": "user",
            "content": "åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
        }
    ],
    "tools": [
        {
            "type": "function",
            "function": {
                "name": "get_weather",
                "description": "è·å–åŸå¸‚å¤©æ°”",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "city": {
                            "type": "string",
                            "description": "åŸå¸‚åç§°ï¼Œä¾‹å¦‚ åŒ—äº¬"
                        }
                    },
                    "required": [
                        "city"
                    ]
                }
            }
        }
    ],
    "tool_choice": "auto"
}'

 AI è¿”å›å†…å®¹ï¼ˆæ¨¡å‹å†³å®šè°ƒç”¨ get_weatherï¼‰ï¼š

{
  "choices": [
    {
      "message": {
        "role": "assistant",
        "tool_calls": [
          {
            "id": "toolcall-abc123",
            "type": "function",
            "function": {
              "name": "get_weather",
              "arguments": "{ \"city\": \"åŒ—äº¬\" }"
            }
          }
        ]
      }
    }
  ]
}

ç¬¬äºŒæ­¥ï¼šä½ æ‰§è¡Œå®é™…å‡½æ•°ï¼ˆä¾‹å¦‚è‡ªå·±å†™çš„å¤©æ°” APIï¼‰ï¼Œå¹¶å°†ç»“æœé€šè¿‡å·¥å…·å“åº”å‘å› AI #
å‡è®¾ä½ æŸ¥è¯¢å¤©æ°”åå¾—åˆ°ï¼š

{ "temperature": "31Â°C", "condition": "æ™´" }

é‚£ä¹ˆä½ ç°åœ¨å‘é€çš„æ˜¯ å®Œæ•´ä¸Šä¸‹æ–‡ + tool å“åº”ï¼š

curl --location --request POST 'https://api.whatai.cc/v1/chat/completions' \
--header 'Authorization: Bearer $API_KEY' \
--header 'Content-Type: application/json' \
--data-raw '{
    "model": "gpt-4o",
    "messages": [
        {
            "role": "user",
            "content": "åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
        },
        {
            "role": "assistant",
            "tool_calls": [
                {
                    "id": "toolcall-abc123",
                    "type": "function",
                    "function": {
                        "name": "get_weather",
                        "arguments": "{ \"city\": \"åŒ—äº¬\" }"
                    }
                }
            ]
        },
        {
            "role": "tool",
            "tool_call_id": "toolcall-abc123",
            "content": "{ \"temperature\": \"31Â°C\", \"condition\": \"æ™´\" }"
        }
    ]
}'

ç¬¬ä¸‰æ­¥ï¼šè¿”å›æœ€ç»ˆçš„è‡ªç„¶è¯­è¨€å›å¤ï¼ˆä¾‹å¦‚ï¼‰ï¼š #

{
    "choices": [
        {
            "message": {
                "role": "assistant",
                "content": "åŒ—äº¬ä»Šå¤©æ˜¯æ™´å¤©ï¼Œæ°”æ¸©ä¸º 31Â°Cã€‚é€‚åˆå‡ºé—¨å“¦ï¼"
            }
        }
    ]
}

gptæ–‡ç”Ÿå›¾ #
æ¦‚å¿µä»‹ç» #
æ–‡ç”Ÿå›¾(Text-to-Image)æ˜¯ä¸€ç§é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°ç”Ÿæˆå¯¹åº”å›¾åƒçš„æŠ€æœ¯ã€‚æœ¬APIåŸºäºOpenAIçš„GPTæ¨¡å‹å®ç°ï¼Œæ”¯æŒå¤šç§å›¾åƒç”Ÿæˆæ¨¡å‹å’Œå°ºå¯¸è§„æ ¼ã€‚

åŸºç¡€ä¿¡æ¯ #
è¯·æ±‚æ–¹å¼: POST

Base URL: https://api.whatai.cc

æ¥å£è·¯å¾„: /v1/images/generations

è®¤è¯æ–¹å¼: Bearer Token

è¯·æ±‚å‚æ•° #
å‚æ•°å	ç±»å‹	å¿…å¡«	è¯´æ˜
prompt	string	æ˜¯	å›¾åƒæè¿°æ–‡æœ¬
n	int	å¦	ç”Ÿæˆå›¾ç‰‡æ•°é‡(é»˜è®¤1)
model	string	å¦	æ¨¡å‹é€‰æ‹©(é»˜è®¤gpt-image-1)
aspect_ratio	string	å¦	å®½é«˜æ¯”(å¦‚"16:9")
size	string	å¦	å›¾åƒå°ºå¯¸(å¦‚"1024x1536")
seed	int	å¦	éšæœºç§å­(-1è¡¨ç¤ºéšæœº)
æ”¯æŒçš„æ¨¡å‹ #
gpt-image-1: åŸºç¡€æ¨¡å‹(æ”¯æŒ1024x1024,1024x1536,1536x1024)

seedream-3.0: å›½å†…æœ€å¼ºï¼Œè±†åŒ…å›¢é˜Ÿå¼€å‘ï¼Œå³æ¢¦3 AIç»˜å›¾å¤§æ¨¡å‹ã€‚

gpt-image-1: Openai GPT çš„ç”»å›¾æ¨¡å‹ï¼Œæ–‡æœ¬ç†è§£ä¸å›¾åƒç”Ÿæˆæ·±åº¦èåˆï¼Œé€‚åˆæ–‡å­—é©±åŠ¨å‹åˆ›ä½œ

imagen4: è°·æ­Œçš„ç»˜å›¾æ¨¡å‹ï¼Œå¯¹æ ‡ gpt-image

flux-kontext-max: Black Forest Labsæ¨å‡ºå•†ä¸šçº§ç²¾åº¦çš„å›¾åƒç”Ÿæˆï¼Œæ»¡è¶³ä¸“ä¸šè®¾è®¡éœ€æ±‚

flux-kontext-pro: æ”¯æŒæ–‡æœ¬+å›¾åƒè¾“å…¥çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆ/ç¼–è¾‘æ¨¡å‹ï¼Œæ§åˆ¶æ›´ç²¾å‡†ã€‚

Pythonè°ƒç”¨ç¤ºä¾‹ #
import json
import requests

# APIé…ç½®
API_KEY = "sk-********************"  # æ›¿æ¢ä¸ºä½ çš„APIå¯†é’¥
API_URL = "https://api.whatai.cc/v1/images/generations"

# è¯·æ±‚å‚æ•°
payload = {
    "prompt": "å“ªå’ç«–ç€å¤§æ‹‡æŒ‡ï¼ŒèƒŒæ™¯å¹¿å‘Šç‰Œå†™ç€ API",  # å›¾åƒæè¿°
    "n": 1,  # ç”Ÿæˆæ•°é‡ 
    "model": "gpt-image-1",  # ä½¿ç”¨åŸºç¡€æ¨¡å‹
    "size": "1024x1536",  # å›¾åƒå°ºå¯¸
    "seed": -1  # -1 ä»£è¡¨éšæœºç§å­
}

headers = {
    "Authorization": f"Bearer {API_KEY}",
    "Content-Type": "application/json"
}

try:
    # å‘é€POSTè¯·æ±‚
    response = requests.post(API_URL, json=payload, headers=headers)
    response.raise_for_status()  # æ£€æŸ¥HTTPé”™è¯¯
    
    # è§£æå“åº”æ•°æ®
    result = response.json()
    print(json.dumps(result, indent=4, ensure_ascii=False))
    
except requests.exceptions.RequestException as e:
    # é”™è¯¯å¤„ç†
    print(f"è¯·æ±‚å¤±è´¥: {e}")
    if e.response:
        print(f"çŠ¶æ€ç : {e.response.status_code}")
        print(f"å“åº”å†…å®¹: {e.response.text}")

å“åº”ç¤ºä¾‹ #
å›¾ç‰‡è¿”å›base64éœ€è¦è½¬ä¸ºpngå›¾ç‰‡æ ¼å¼ã€‚

æˆåŠŸå“åº”å°†è¿”å›åŒ…å«ç”Ÿæˆå›¾åƒä¿¡æ¯çš„JSONå¯¹è±¡ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«ï¼š

data: å›¾åƒæ•°æ®æ•°ç»„

url: å›¾åƒè®¿é—®URL(éƒ¨åˆ†æ¨¡å‹)

b64_json: Base64ç¼–ç çš„å›¾åƒæ•°æ®

{
    "created": 1677664795,
    "data": [
        {
            "url": "https://.../generated-image.png",
            "b64_json": "..." 
        }
    ]
}

å¸¸è§é”™è¯¯ç ï¼š #
401: è®¤è¯å¤±è´¥(æ— æ•ˆAPIå¯†é’¥)

400: è¯·æ±‚å‚æ•°é”™è¯¯

429: è¯·æ±‚é¢‘ç‡é™åˆ¶

500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

å»ºè®®åœ¨ä»£ç ä¸­æ·»åŠ å®Œå–„çš„é”™è¯¯å¤„ç†é€»è¾‘ï¼Œå¦‚ç¤ºä¾‹ä¸­æ‰€ç¤ºã€‚

è¯¦ç»†æ•™ç¨‹ç¥é©¬ä¸­è½¬API #
ğŸ¨ ç¥é©¬ä¸­è½¬API 2025è¶…å¼ºç”»å›¾æ¨¡å‹å¤©å›¢é©¾åˆ°ï¼ #
â€œä¸ä¼šç”»ç”»çš„APIä¸æ˜¯å¥½è‰ºæœ¯å®¶â€ - ç¥é©¬ä¸­è½¬APIç”¨æˆ·å¦‚æ˜¯è¯´

æ¬¢è¿æ¥åˆ°ã€Šæ‰‹æŠŠæ‰‹æ•™ä½ ç©è½¬AIç”»å›¾ã€‹ï¼è¿™é‡Œæœ‰ä¸€ç¾¤èº«æ€€ç»æŠ€çš„"æ•°å­—è¾¾èŠ¬å¥‡"ï¼Œéšä½ è°ƒé£~

ğŸŒŸ æ¨¡å‹å¤©å›¢ç®€å†ï¼ˆ2025é¡¶é…ç‰ˆï¼‰ #
æ¨¡ç‰¹å	åå°å¤§ä½¬	å¿…æ€æŠ€	èº«ä»·ï¼ˆæ¯å¼ ï¼‰
seedream-3.0	å­—èŠ‚è·³åŠ¨è±†åŒ…	æ–‡ç”Ÿå›¾é—ªç”µä¾ âš¡ï¸	ï¿¥0.08 (~å…è´¹10ä¸‡å¼ !)
gpt-image-1	OpenAI	æ”¹å›¾/åˆå›¾é­”æœ¯å¸ˆğŸ©	ï¿¥1+
imagen4	è°·æ­Œ	GPT-imageçš„å®¿æ•ŒğŸ‘Š	å¾…å®š
flux-kontext	Black Forest	å•†ä¸šçº§ç²¾ä¿®å¤§å¸ˆğŸ–‹ï¸	ï¿¥0.2~0.4
ğŸ“Œ æ¸©é¦¨æç¤ºï¼š

ä¸åŒæ¨¡ç‰¹åœ¨ä¸åŒåœºæ™¯è¡¨ç°è¿¥å¼‚ï¼Œå»ºè®®å¤šçº¦ä¼šè¯•è¯•~ï¼ˆæ¯”å¦‚seedreamé€‚åˆæ‰¹é‡åˆ›ä½œï¼Œgpt-imageæ“…é•¿ç²¾ä¿®ï¼‰

ğŸš€ ä¸Šè½¦æŒ‡å— #
1ï¸âƒ£ é¢†é’¥åŒ™ï¼šåœ¨ https://api.whatai.cc/token è·å–APIå¯†é’¥

2ï¸âƒ£ é€‰è½¦ç«™ï¼š

API_HOST = "api.whatai.cc"
ğŸ’« æ¨¡ç‰¹Aï¼šseedream-3.0ï¼ˆæ–‡ç”Ÿå›¾å°æ—‹é£ï¼‰ #

import base64, http.client, json, os, time

# é…ç½®ä½ çš„é­”æ³•æ£’ğŸ”®
API_KEY = "sk-******"  # æ­¤å¤„å¡«ä½ çš„é˜¿æ‹‰ä¸ç¥ç¯å¯†ç 
prompt = "æ¼«ç”»é£æ ¼è‹±è¯­å­¦ä¹ å›¾ï¼šHelloå•è¯è®°å¿†å¼•å¯¼"  # ä½ çš„è„‘æ´æœ‰å¤šå¤§ï¼Œèˆå°å°±æœ‰å¤šå¤§ï¼
size = "1664x936"  # å¸¸ç”¨å°ºå¯¸ä»»é€‰ï¼š16:9(å®½å±) | 1:1(Insé£) | 9:16(æ‰‹æœºå£çº¸)

# å¼€å§‹å¬å”¤ï¼
conn = http.client.HTTPSConnection("api.whatai.cc")
conn.request("POST", "/v1/images/generations", json.dumps({
    "prompt": prompt,
    "model": "seedream-3.0",
    "size": size,
    "response_format": "b64_json"  # å¿…é€‰ï¼å¦åˆ™æ”¶ä¸åˆ°å›¾ç‰‡å¿«é€’
}), headers={"Authorization": f"Bearer {API_KEY}"})

# æ‹†å¿«é€’å•¦~
res = conn.getresponse()
if res.status == 200:
    img_data = json.loads(res.read())["data"][0]["b64_json"]
    with open(f"seedream_{int(time.time())}.png", "wb") as f:
        f.write(base64.b64decode(img_data))
    print("ğŸ‰ ä½ çš„å¤§ä½œå·²ç©ºæŠ•åˆ°æ–‡ä»¶å¤¹ï¼")
else:
    print(f"âŒ æ¨¡ç‰¹ç½¢å·¥äº†ï¼š{res.status} {res.reason}")

æ¨¡ç‰¹Bï¼šgpt-image-1ï¼ˆPSæˆ˜ç¥ï¼‰ #

import requests

# å‡†å¤‡æ•´å®¹æ‰‹æœ¯å°
api_key = "sk-******"
files = [
    ("image", ("åŸå›¾.jpg", open("å“ªå’.jpg", "rb"), "image/jpeg")),  # è¦æ”¹é€ çš„å¯¹è±¡
    # ("image", ("èƒŒæ™¯.jpg", ...))  # å¤šå›¾åˆå¹¶æ—¶åŠ æ­¤é¡¹
]
payload = {"prompt": "ç»™å“ªå’æˆ´ä¸Šç‚«é…·çº¢è‰²é¸­èˆŒå¸½"}  # ä½ çš„æ”¹é€ æŒ‡ä»¤

# å¼€å§‹æ–½æ³•ï¼
r = requests.post(
    "https://api.whatai.cc/v1/images/edits",
    headers={"Authorization": f"Bearer {api_key}"},
    files=files,
    data=payload
)

# è§è¯å¥‡è¿¹æ—¶åˆ»âœ¨
if r.status_code == 200:
    img_data = r.json()["data"][0]["b64_json"]
    with open("æ½®é…·å“ªå’.png", "wb") as f:
        f.write(base64.b64decode(img_data))
    print(

 æ¨¡ç‰¹Cï¼šflux-kontextï¼ˆå•†ä¸šçº§ç²¾ä¿®å¤§å¸ˆï¼‰ #

import requests
import os
import base64
from time import sleep

# å‡†å¤‡ä½ çš„é­”æ³•å·¥å…·ç®±ğŸ› ï¸
API_KEY = "sk-******"  # ä½ çš„ä¸“å±é­”æ³•é€šè¡Œè¯
target_img = "æ²™æ¼ .jpg"  # éœ€è¦ç‚¹çŸ³æˆé‡‘çš„ç…§ç‰‡

print("ğŸ”® æ­£åœ¨å¬å”¤å•†ä¸šçº§ä¿®å›¾ç²¾çµflux-kontext...")
sleep(1)  # åŠ ç‚¹é­”æ³•ç‰¹æ•ˆç­‰å¾…æ—¶é—´

try:
    # å¼€å§‹æ–½å±•ä¸“ä¸šçº§å›¾åƒé­”æ³•
    response = requests.post(
        "https://api.whatai.cc/v1/images/edits",  # å›½é™…ç«™å°ä¼™ä¼´è¯·ç”¨.com
        headers={"Authorization": f"Bearer {API_KEY}"},
        files=[("image[]", (os.path.basename(target_img), open(target_img, "rb"), "image/jpeg"))],
        data={
            "model": "flux-kontext-max",  # å¯é€‰ï¼šflux-kontext-proï¼ˆé€Ÿåº¦å‹ï¼‰ï½œ flux-kontext-maxï¼ˆè´¨é‡å‹ï¼‰
            "prompt": "ç»™æ²™æ¼ ç…§ç‰‡æ·»åŠ ç»¿æ´²å’Œå½©è™¹",  # ä½ çš„æƒ³è±¡åŠ›æ˜¯å”¯ä¸€çš„é™åˆ¶
            "quality": "high"  # å“è´¨é€‰é¡¹ï¼šlowï¼ˆå¿«ä½†ç³™ï¼‰ï½œ mediumï½œ highï¼ˆæ…¢ä½†ç²¾ï¼‰
        }
    )
    
    # æ£€æŸ¥é­”æ³•æ˜¯å¦ç”Ÿæ•ˆ
    if response.status_code == 200:
        print("ğŸŒˆ é­”æ³•ç”Ÿæ•ˆä¸­...ä¸“ä¸šç²¾çµæ­£åœ¨ç²¾ä¿®æ‚¨çš„ç…§ç‰‡")
        img_data = response.json()["data"][0]["b64_json"]
        
        # ä¿å­˜ä½ çš„é­”æ³•æ°ä½œ
        with open("æ²™æ¼ å¥‡è¿¹.jpg", "wb") as f:
            f.write(base64.b64decode(img_data))
        print("ğŸ¨ ä¸“ä¸šçº§å¤§ç‰‡å·²ç”Ÿæˆï¼å»ºè®®ç«‹å³è®¾ä¸ºå£çº¸ç‚«è€€~")
        
    else:
        print(f"ğŸ§™â€â™‚ï¸ å•Šå“¦ï¼Œé­”æ³•å¤±çµäº†ï¼é”™è¯¯ä»£ç ï¼š{response.status_code}")
        print(f"ğŸ” è¯¦ç»†åŸå› ï¼š{response.text[:100]}...")  # æ˜¾ç¤ºéƒ¨åˆ†é”™è¯¯ä¿¡æ¯

except Exception as e:
    print(f"âš ï¸ é­”æ³•åå™¬è­¦å‘Šï¼š{str(e)}")
    print("ğŸ’¡ å°è´´å£«ï¼šæ£€æŸ¥å›¾ç‰‡è·¯å¾„ | ç½‘ç»œè¿æ¥ | APIå¯†é’¥æœ‰æ•ˆæ€§")

finally:
    print("âœ¨ æœ¬æ¬¡é­”æ³•ä»ªå¼ç»“æŸï¼ŒæœŸå¾…æ‚¨ä¸‹æ¬¡å¬å”¤ï¼")

gptå›¾ç”Ÿå›¾ #
æ¦‚å¿µä»‹ç» #
æœ¬APIæä¾›å›¾åƒç¼–è¾‘åŠŸèƒ½ï¼Œæ”¯æŒï¼š

å•å›¾ä¿®æ”¹ï¼šåŸºäºæç¤ºè¯å¯¹å•å¼ å›¾ç‰‡è¿›è¡Œå†…å®¹ä¿®æ”¹

å¤šå›¾åˆå¹¶ï¼šå°†å¤šå¼ å›¾ç‰‡æŒ‰æç¤ºè¯è¦æ±‚åˆå¹¶å¤„ç†

åŸºç¡€ä¿¡æ¯ #
è¯·æ±‚æ–¹å¼ï¼šPOST

Base URLï¼šhttps://api.whatai.cc/v1/images/edits

è®¤è¯æ–¹å¼ï¼šBearer Token

å•å›¾ä¿®æ”¹ç¤ºä¾‹

Pythonä»£ç ç¤ºä¾‹ #

import base64
import json
import requests

# APIé…ç½®
url = "https://api.whatai.cc/v1/images/edits"
api_key = "sk-******"  # æ›¿æ¢ä¸ºä½ çš„APIå¯†é’¥

headers = {
    "Authorization": f"Bearer {api_key}"
}

# è¯·æ±‚å‚æ•°
payload = {
    "prompt": "ç»™å“ªå’å¸¦ä¸Šä¸€ä¸ªçº¢è‰²çš„é¸­èˆŒå¸½ï¼Œé£æ ¼ä¿æŒä¸å˜",  # ç¼–è¾‘æŒ‡ä»¤
    # "size": "1024x1024"  # å¯é€‰è¾“å‡ºå°ºå¯¸
}

# å‡†å¤‡å›¾ç‰‡æ–‡ä»¶
files = [
    ("image",  # å›ºå®šå‚æ•°å
        ("nezha.png",  # æ–‡ä»¶å
         open("/path/to/nezha.png", "rb"),  # æ–‡ä»¶è·¯å¾„
         "image/png")  # æ–‡ä»¶ç±»å‹
    )
]

# å‘é€è¯·æ±‚
response = requests.post(url, headers=headers, data=payload, files=files)

# å¤„ç†å“åº”
if response.status_code == 200:
    try:
        data = response.json()
        
        # æå–base64ç¼–ç çš„å›¾ç‰‡æ•°æ®
        if data.get("data") and isinstance(data["data"], list):
            image_b64 = data["data"][0].get("b64_json")
            
            if image_b64:
                # è§£ç å¹¶ä¿å­˜å›¾ç‰‡
                with open("output.png", "wb") as f:
                    f.write(base64.b64decode(image_b64))
                print("å›¾ç‰‡ä¿å­˜æˆåŠŸ")
            else:
                print("æœªè·å–åˆ°æœ‰æ•ˆå›¾ç‰‡æ•°æ®")
        else:
            print("å“åº”æ•°æ®ç»“æ„å¼‚å¸¸")
    except json.JSONDecodeError:
        print("JSONè§£æå¤±è´¥")
else:
    print(f"è¯·æ±‚å¤±è´¥: {response.status_code}")

å‚æ•°è¯´æ˜ #
å‚æ•°å	å¿…é€‰	ç±»å‹	è¯´æ˜
image	æ˜¯	file	è¦ç¼–è¾‘çš„å›¾ç‰‡æ–‡ä»¶
prompt	æ˜¯	string	ç¼–è¾‘æŒ‡ä»¤æè¿°
size	å¦	string	è¾“å‡ºå›¾ç‰‡å°ºå¯¸ï¼Œå¦‚"1024x1024"
å“åº”æ ¼å¼ #
æˆåŠŸå“åº”ç¤ºä¾‹ï¼š

{
    "data": [
        {
            "b64_json": "base64ç¼–ç çš„å›¾ç‰‡æ•°æ®"
        }
    ]
}

æ³¨æ„äº‹é¡¹ #
å›¾ç‰‡æ–‡ä»¶éœ€å°äº10MB

æ”¯æŒPNG/JPEGæ ¼å¼

ç¼–è¾‘æ•ˆæœå–å†³äºæç¤ºè¯æè¿°çš„å‡†ç¡®æ€§

æ•æ„Ÿæ“ä½œéœ€ç¡®ä¿ç¬¦åˆå†…å®¹æ”¿ç­–

****

æ‰€æœ‰å¯¹è¯æ¨¡å‹å‡å…¼å®¹ OpenAI æ ¼å¼
æ‰€æœ‰å¯¹è¯æ¨¡å‹å‡å…¼å®¹ OpenAI æ ¼å¼ï¼Œä¸€é”®å¯¹æ¥
ä»…éœ€æ›¿æ¢ model ï¼Œå³å¯ä½¿ç”¨ OpenAIã€Claudeã€Geminiã€DeepSeekã€Grokã€Qwen ç­‰å¤§è¯­è¨€æ¨¡å‹

curl --location -g --request POST '{{BASE_URL}}/v1/chat/completions' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer sk-Uk' \
--header 'User-Agent: Apifox/1.0.0 (https://apifox.com)' \
--header 'Content-Type: application/json' \
--data-raw '{
    "model": "{{model}}",
    "messages": [
      {
        "role": "system",
        "content": "You are a helpful assistant."
      },
      {
        "role": "user",
        "content": "Hello!"
      }
    ]
  }'

*****
èŠå¤©å®Œæˆå¯¹è±¡
å‚æ•°	ç±»å‹	æè¿°
id	string	èŠå¤©å®Œæˆçš„å”¯ä¸€æ ‡è¯†ç¬¦
choices	array	èŠå¤©å®Œæˆé€‰é¡¹åˆ—è¡¨ã€‚å¦‚æœnå¤§äº1,å¯ä»¥æœ‰å¤šä¸ªé€‰é¡¹
created	integer	åˆ›å»ºèŠå¤©å®Œæˆçš„Unixæ—¶é—´æˆ³(ç§’)
model	string	ç”¨äºèŠå¤©å®Œæˆçš„æ¨¡å‹
system_fingerprint	string	è¯¥æŒ‡çº¹è¡¨ç¤ºæ¨¡å‹è¿è¡Œçš„åç«¯é…ç½®
object	string	å¯¹è±¡ç±»å‹,æ€»æ˜¯ chat.completion
usage	object	å®Œæˆè¯·æ±‚çš„ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯
completion_tokens	integer	ç”Ÿæˆçš„å®Œæˆä¸­çš„æ ‡è®°æ•°
prompt_tokens	integer	æç¤ºä¸­çš„æ ‡è®°æ•°
total_tokens	integer	è¯·æ±‚ä¸­ä½¿ç”¨çš„æ ‡è®°æ€»æ•°(æç¤º + å®Œæˆ)


{
  "id": "chatcmpl-123",
  "object": "chat.completion",
  "created": 1677652288,
  "model": "gpt-3.5-turbo-0613",
  "system_fingerprint": "fp_44709d6fcb",
  "choices": [{
    "index": 0,
    "message": {
      "role": "assistant",
      "content": "\n\nHello there, how may I assist you today?",
    },
    "finish_reason": "stop"
  }],
  "usage": {
    "prompt_tokens": 9,
    "completion_tokens": 12,
    "total_tokens": 21
  }
}


****
èŠå¤©å®Œæˆå—å¯¹è±¡
å‚æ•°	ç±»å‹	æè¿°
id	string	èŠå¤©å®Œæˆçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚æ¯ä¸ªå—å…·æœ‰ç›¸åŒçš„ID
choices	array	èŠå¤©å®Œæˆé€‰é¡¹åˆ—è¡¨ã€‚å¦‚æœnå¤§äº1,å¯ä»¥æœ‰å¤šä¸ªé€‰é¡¹
created	integer	åˆ›å»ºèŠå¤©å®Œæˆçš„Unixæ—¶é—´æˆ³(ç§’)ã€‚æ¯ä¸ªå—å…·æœ‰ç›¸åŒçš„æ—¶é—´æˆ³
model	string	ç”Ÿæˆå®Œæˆçš„æ¨¡å‹
system_fingerprint	string	è¯¥æŒ‡çº¹è¡¨ç¤ºæ¨¡å‹è¿è¡Œçš„åç«¯é…ç½®
object	string	å¯¹è±¡ç±»å‹,æ€»æ˜¯ chat.completion.chunk

{"id":"chatcmpl-123","object":"chat.completion.chunk","created":1694268190,"model":"gpt-3.5-turbo-0613", "system_fingerprint": "fp_44709d6fcb", "choices":[{"index":0,"delta":{"role":"assistant","content":""},"finish_reason":null}]}

{"id":"chatcmpl-123","object":"chat.completion.chunk","created":1694268190,"model":"gpt-3.5-turbo-0613", "system_fingerprint": "fp_44709d6fcb", "choices":[{"index":0,"delta":{"content":"Hello"},"finish_reason":null}]}

{"id":"chatcmpl-123","object":"chat.completion.chunk","created":1694268190,"model":"gpt-3.5-turbo-0613", "system_fingerprint": "fp_44709d6fcb", "choices":[{"index":0,"delta":{"content":"!"},"finish_reason":null}]}

....

{"id":"chatcmpl-123","object":"chat.completion.chunk","created":1694268190,"model":"gpt-3.5-turbo-0613", "system_fingerprint": "fp_44709d6fcb", "choices":[{"index":0,"delta":{"content":" today"},"finish_reason":null}]}

{"id":"chatcmpl-123","object":"chat.completion.chunk","created":1694268190,"model":"gpt-3.5-turbo-0613", "system_fingerprint": "fp_44709d6fcb", "choices":[{"index":0,"delta":{"content":"?"},"finish_reason":null}]}

{"id":"chatcmpl-123","object":"chat.completion.chunk","created":1694268190,"model":"gpt-3.5-turbo-0613", "system_fingerprint": "fp_44709d6fcb", "choices":[{"index":0,"delta":{},"finish_reason":"stop"}]}


*****
è§†è§‰è¯­è¨€æ¨¡å‹ä»‹ç»
ä½¿ç”¨åœºæ™¯
è§†è§‰è¯­è¨€æ¨¡å‹ï¼ˆVLMï¼‰æ˜¯ä¸€ç§èƒ½å¤ŸåŒæ—¶æ¥å—è§†è§‰ï¼ˆå›¾åƒï¼‰å’Œè¯­è¨€ï¼ˆæ–‡æœ¬ï¼‰ä¸¤ç§æ¨¡æ€ä¿¡æ¯è¾“å…¥çš„å¤§è¯­è¨€æ¨¡å‹ã€‚åŸºäºè§†è§‰è¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥ä¼ å…¥å›¾åƒåŠæ–‡æœ¬ä¿¡æ¯ï¼Œæ¨¡å‹èƒ½å¤Ÿç†è§£åŒæ—¶ç†è§£å›¾åƒåŠä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯å¹¶è·ŸéšæŒ‡ä»¤åšå‡ºå“åº”ã€‚å¦‚ï¼š
è§†è§‰å†…å®¹è§£è¯»ï¼šè¦æ±‚æ¨¡å‹å¯¹å›¾ç‰‡ä¸­åŒ…å«çš„ä¿¡æ¯è¿›è¡Œè§£è¯»ã€æè¿°ï¼Œå¦‚åŒ…å«çš„äº‹ç‰©ã€æ–‡å­—ï¼Œäº‹ç‰©çš„ç©ºé—´å…³ç³»ï¼Œå›¾åƒçš„é¢œè‰²ã€æ°”æ°›ç­‰ï¼›
ç»“åˆè§†è§‰å†…å®¹åŠä¸Šä¸‹æ–‡ï¼Œå¼€å±•å¤šè½®ä¼šè¯ï¼›
éƒ¨åˆ†æ›¿ä»£ OCR ç­‰ä¼ ç»Ÿæœºå™¨è§†è§‰æ¨¡å‹ï¼›
éšç€æ¨¡å‹èƒ½åŠ›çš„æŒç»­æå‡ï¼Œæœªæ¥è¿˜å¯ä»¥ç”¨äºè§†è§‰æ™ºèƒ½ä½“ã€æœºå™¨äººç­‰é¢†åŸŸã€‚
â€‹
ä½¿ç”¨æ–¹å¼
å¯¹äº VLM æ¨¡å‹ï¼Œå¯åœ¨è°ƒç”¨ /chat/completions æ¥å£æ—¶ï¼Œæ„é€ åŒ…å« å›¾ç‰‡ url æˆ– base64 ç¼–ç å›¾ç‰‡ çš„ message æ¶ˆæ¯å†…å®¹è¿›è¡Œè°ƒç”¨ã€‚é€šè¿‡ detail å‚æ•°æ§åˆ¶å¯¹å›¾åƒçš„é¢„å¤„ç†æ–¹å¼ã€‚
â€‹
2.1 å…³äºå›¾ç‰‡ç»†èŠ‚æ§åˆ¶å‚æ•°è¯´æ˜
SiliconCloud æä¾› lowï¼Œhighï¼Œauto ä¸‰ä¸ª detail å‚æ•°é€‰é¡¹ã€‚ å¯¹äºç›®å‰æ”¯æŒçš„æ¨¡å‹ï¼Œdetail ä¸æŒ‡å®šæˆ–æŒ‡å®šä¸º high æ—¶ä¼šé‡‡ç”¨ highï¼ˆâ€œé«˜åˆ†è¾¨ç‡â€ï¼‰æ¨¡å¼ï¼Œè€ŒæŒ‡å®šä¸º low æˆ–è€… auto æ—¶ä¼šé‡‡ç”¨ lowï¼ˆâ€œä½åˆ†è¾¨ç‡â€ï¼‰æ¨¡å¼ã€‚
â€‹
2.2 åŒ…å«å›¾åƒçš„ message æ¶ˆæ¯æ ¼å¼ç¤ºä¾‹
â€‹
ä½¿ç”¨å›¾ç‰‡ url å½¢å¼

{
    "role": "user",
    "content":[
        {
            "type": "image_url",
            "image_url": {
                "url": "https://sf-maas-uat-prod.oss-cn-shanghai.aliyuncs.com/outputs/658c7434-ec12-49cc-90e6-fe22ccccaf62_00001_.png",
                "detail":"high"
            }
        },
        {
            "type": "text",
            "text": "text-prompt here"
        }
    ]
}

2.2 base64 å½¢å¼
{
    "role": "user",
    "content":[
        {
            "type": "image_url",
            "image_url": {
                "url": f"data:image/jpeg;base64,{base64_image}",
                "detail":"low"
            }
        },
        {
            "type": "text",
            "text": "text-prompt here"
        }
    ]
}

2.3 å¤šå›¾ç‰‡å½¢å¼ï¼Œå…¶ä¸­æ¯ä¸ªå›¾ç‰‡å¯ä»¥æ˜¯ä¸Šè¿°ä¸¤ç§å½¢å¼ä¹‹ä¸€
è¯·æ³¨æ„ï¼ŒDeepseekVL2ç³»åˆ—æ¨¡å‹é€‚ç”¨äºå¤„ç†çŸ­ä¸Šä¸‹æ–‡ï¼Œå»ºè®®æœ€å¤šä¼ å…¥2å¼ å›¾ç‰‡ã€‚è‹¥ä¼ å…¥è¶…è¿‡2å¼ å›¾ç‰‡ï¼Œæ¨¡å‹å°†è‡ªåŠ¨è°ƒæ•´å›¾ç‰‡å°ºå¯¸ä¸º384*384ï¼Œä¸”æŒ‡å®šçš„detailå‚æ•°å°†æ— æ•ˆã€‚
{
    "role": "user",
    "content":[
        {
            "type": "image_url",
            "image_url": {
                "url": "https://sf-maas-uat-prod.oss-cn-shanghai.aliyuncs.com/outputs/658c7434-ec12-49cc-90e6-fe22ccccaf62_00001_.png",
            }
        },
        {
            "type": "image_url",
            "image_url": {
                "url": f"data:image/jpeg;base64,{base64_image}"
            }
        },
        {
            "type": "text",
            "text": "text-prompt here"
        }
    ]
}
è§†è§‰è¾“å…¥å†…å®¹è®¡è´¹æ–¹å¼
å¯¹äºå›¾ç‰‡ç­‰è§†è§‰è¾“å…¥å†…å®¹ï¼Œæ¨¡å‹ä¼šå°†å…¶è½¬åŒ–ä¸º tokensï¼Œä¸æ–‡æœ¬ä¿¡æ¯ä¸€å¹¶ä½œä¸ºæ¨¡å‹è¾“å‡ºçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå› æ­¤ä¹Ÿä¼šä¸€å¹¶è¿›è¡Œè®¡è´¹ã€‚ä¸åŒæ¨¡å‹çš„è§†è§‰å†…å®¹è½¬åŒ–æ–¹å¼ä¸åŒã€‚
å›¾åƒè¾“å…¥ä»¥ä»£å¸è®¡é‡å’Œæ”¶è´¹ï¼Œå°±åƒæ–‡æœ¬è¾“å…¥ä¸€æ ·ã€‚ç»™å®šå›¾åƒçš„ä»£å¸æˆæœ¬ç”±ä¸¤ä¸ªå› ç´ å†³å®šï¼šå…¶å¤§å°å’Œdetailæ¯ä¸ª image_url å—ä¸Šçš„é€‰é¡¹ã€‚æ‰€æœ‰å›¾åƒdetail: lowæ¯å¼ æˆæœ¬ä¸º 85 ä¸ªä»£å¸ã€‚detail: highé¦–å…ˆå°†å›¾åƒç¼©æ”¾ä»¥é€‚åˆ 2048 x 2048 æ­£æ–¹å½¢ï¼Œå¹¶ä¿æŒå…¶çºµæ¨ªæ¯”ã€‚ç„¶åï¼Œå¯¹å®ƒä»¬è¿›è¡Œç¼©æ”¾ï¼Œä½¿å›¾åƒçš„æœ€çŸ­è¾¹é•¿ä¸º 768pxã€‚æœ€åï¼Œæˆ‘ä»¬è®¡ç®—å›¾åƒç”±å¤šå°‘ä¸ª 512px æ­£æ–¹å½¢ç»„æˆã€‚æ¯ä¸ªæ­£æ–¹å½¢çš„æˆæœ¬ä¸º170 ä¸ªä»£å¸ã€‚å¦å¤–85 ä¸ªä»£å¸å§‹ç»ˆæ·»åŠ åˆ°æœ€ç»ˆæ€»æ•°ä¸­ã€‚
ä»¥ä¸‹æ˜¯ä¸€äº›è¯æ˜ä¸Šè¿°å†…å®¹çš„ä¾‹å­ã€‚
æ¨¡å¼ä¸‹çš„ 1024 x 1024 æ–¹å½¢å›¾åƒdetail: highèŠ±è´¹ 765 ä¸ªä»£å¸
1024 å°äº 2048ï¼Œå› æ­¤æ²¡æœ‰åˆå§‹è°ƒæ•´å¤§å°ã€‚
æœ€çŸ­è¾¹æ˜¯ 1024ï¼Œå› æ­¤æˆ‘ä»¬å°†å›¾åƒç¼©å°åˆ° 768 x 768ã€‚
éœ€è¦ 4 ä¸ª 512px æ–¹å½¢å›¾å—æ¥è¡¨ç¤ºå›¾åƒï¼Œå› æ­¤æœ€ç»ˆçš„ token æˆæœ¬ä¸º170 * 4 + 85 = 765ã€‚
æ¨¡å¼ä¸‹ 2048 x 4096 çš„å›¾åƒdetail: highèŠ±è´¹ 1105 ä¸ªä»£å¸
æˆ‘ä»¬å°†å›¾åƒç¼©å°åˆ° 1024 x 2048 ä»¥é€‚åˆ 2048 æ­£æ–¹å½¢ã€‚
æœ€çŸ­è¾¹æ˜¯ 1024ï¼Œå› æ­¤æˆ‘ä»¬è¿›ä¸€æ­¥ç¼©å°åˆ° 768 x 1536ã€‚
éœ€è¦ 6 ä¸ª 512px çš„å›¾å—ï¼Œå› æ­¤æœ€ç»ˆçš„ä»£å¸æˆæœ¬ä¸º170 * 6 + 85 = 1105ã€‚
4096 x 8192 çš„å›¾åƒdetail: lowæœ€å¤šéœ€è¦ 85 ä¸ªä»£å¸
æ— è®ºè¾“å…¥å¤§å°ï¼Œä½ç»†èŠ‚å›¾åƒéƒ½æ˜¯å›ºå®šæˆæœ¬ã€‚
é™åˆ¶
è™½ç„¶å…·æœ‰è§†è§‰åŠŸèƒ½çš„ GPT-4 åŠŸèƒ½å¼ºå¤§ï¼Œå¯ç”¨äºå¤šç§æƒ…å†µï¼Œä½†äº†è§£è¯¥æ¨¡å‹çš„å±€é™æ€§éå¸¸é‡è¦ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬å·²çŸ¥çš„ä¸€äº›å±€é™æ€§ï¼š
åŒ»å­¦å›¾åƒï¼šè¯¥æ¨¡å‹ä¸é€‚åˆè§£é‡Š CT æ‰«æç­‰ä¸“é—¨çš„åŒ»å­¦å›¾åƒï¼Œä¸åº”ç”¨äºåŒ»ç–—å»ºè®®ã€‚
éè‹±è¯­ï¼šå¤„ç†åŒ…å«éæ‹‰ä¸å­—æ¯ï¼ˆä¾‹å¦‚æ—¥è¯­æˆ–éŸ©è¯­ï¼‰æ–‡æœ¬çš„å›¾åƒæ—¶ï¼Œæ¨¡å‹å¯èƒ½æ— æ³•è¾¾åˆ°æœ€ä½³æ•ˆæœã€‚
å°æ–‡æœ¬ï¼šæ”¾å¤§å›¾åƒä¸­çš„æ–‡æœ¬ä»¥æé«˜å¯è¯»æ€§ï¼Œä½†é¿å…è£å‰ªé‡è¦ç»†èŠ‚ã€‚
æ—‹è½¬ï¼šæ¨¡å‹å¯èƒ½ä¼šè¯¯è§£æ—‹è½¬/é¢ å€’çš„æ–‡æœ¬æˆ–å›¾åƒã€‚
è§†è§‰å…ƒç´ ï¼šæ¨¡å‹å¯èƒ½éš¾ä»¥ç†è§£é¢œè‰²æˆ–æ ·å¼ï¼ˆå¦‚å®çº¿ã€è™šçº¿æˆ–ç‚¹çº¿ï¼‰å„å¼‚çš„å›¾å½¢æˆ–æ–‡æœ¬ã€‚
ç©ºé—´æ¨ç†ï¼šè¯¥æ¨¡å‹éš¾ä»¥å®Œæˆéœ€è¦ç²¾ç¡®ç©ºé—´å®šä½çš„ä»»åŠ¡ï¼Œä¾‹å¦‚è¯†åˆ«æ£‹ç›˜ä½ç½®ã€‚
å‡†ç¡®æ€§ï¼šæ¨¡å‹åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šç”Ÿæˆä¸æ­£ç¡®çš„æè¿°æˆ–æ ‡é¢˜ã€‚
å›¾åƒå½¢çŠ¶ï¼šè¯¥æ¨¡å‹éš¾ä»¥å¤„ç†å…¨æ™¯å›¾åƒå’Œé±¼çœ¼å›¾åƒã€‚
å…ƒæ•°æ®å’Œè°ƒæ•´å¤§å°ï¼šè¯¥æ¨¡å‹ä¸å¤„ç†åŸå§‹æ–‡ä»¶åæˆ–å…ƒæ•°æ®ï¼Œå¹¶ä¸”å›¾åƒåœ¨åˆ†æä¹‹å‰ä¼šè°ƒæ•´å¤§å°ï¼Œä»è€Œå½±å“å…¶åŸå§‹å°ºå¯¸ã€‚
è®¡æ•°ï¼šå¯ä»¥ç»™å‡ºå›¾åƒä¸­ç‰©ä½“çš„è¿‘ä¼¼æ•°é‡ã€‚
éªŒè¯ç ï¼šå‡ºäºå®‰å…¨åŸå› ï¼Œæˆ‘ä»¬å®æ–½äº†ä¸€ä¸ªç³»ç»Ÿæ¥é˜»æ­¢éªŒè¯ç çš„æäº¤ã€‚
å¸¸é—®é—®é¢˜
æˆ‘å¯ä»¥ç”¨æ¥gpt-4ç”Ÿæˆå›¾åƒå—ï¼Ÿ
ä¸ï¼Œä½ å¯ä»¥ç”¨å®ƒdall-e-3æ¥ç”Ÿæˆå›¾åƒå’Œgpt-4oï¼Œgpt-4o-miniæˆ–è€…gpt-4-turboæ¥ç†è§£å›¾åƒã€‚
æˆ‘å¯ä»¥ä¸Šä¼ ä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ï¼Ÿ
æˆ‘ä»¬ç›®å‰æ”¯æŒ PNG (.png)ã€JPEG (.jpeg å’Œ .jpg)ã€WEBP (.webp) å’ŒéåŠ¨ç”» GIF (.gif)ã€‚
æˆ‘å¯ä»¥ä¸Šä¼ çš„å›¾åƒå¤§å°æœ‰é™åˆ¶å—ï¼Ÿ
æ˜¯çš„ï¼Œæˆ‘ä»¬å°†æ¯å¼ å›¾ç‰‡çš„ä¸Šä¼ å¤§å°é™åˆ¶ä¸º 20MBã€‚
æˆ‘å¯ä»¥åˆ é™¤æˆ‘ä¸Šä¼ çš„å›¾ç‰‡å—ï¼Ÿ
ä¸ä¼šï¼Œå›¾åƒç»è¿‡æ¨¡å‹å¤„ç†åï¼Œæˆ‘ä»¬ä¼šè‡ªåŠ¨ä¸ºæ‚¨åˆ é™¤è¯¥å›¾åƒã€‚
åœ¨å“ªé‡Œå¯ä»¥äº†è§£æœ‰å…³ GPT-4 ä¸ Vision çš„æ›´å¤šä¿¡æ¯ï¼Ÿ
æ‚¨å¯ä»¥åœ¨GPT-4 å’Œ Vision ç³»ç»Ÿå¡ä¸­æ‰¾åˆ°æœ‰å…³æˆ‘ä»¬çš„è¯„ä¼°ã€å‡†å¤‡å’Œç¼“è§£å·¥ä½œçš„è¯¦ç»†ä¿¡æ¯ã€‚
æˆ‘ä»¬è¿›ä¸€æ­¥å®æ–½äº†é˜»æ­¢æäº¤ CAPTCHA çš„ç³»ç»Ÿã€‚
GPT-4 ä¸ Vision çš„é€Ÿç‡é™åˆ¶å¦‚ä½•è¿ä½œï¼Ÿ
æˆ‘ä»¬åœ¨ä»¤ç‰Œçº§åˆ«å¤„ç†å›¾åƒï¼Œå› æ­¤æˆ‘ä»¬å¤„ç†çš„æ¯ä¸ªå›¾åƒéƒ½ä¼šè®¡å…¥æ‚¨çš„æ¯åˆ†é’Ÿä»¤ç‰Œ (TPM) é™åˆ¶ã€‚æœ‰å…³ç”¨äºç¡®å®šæ¯å¼ å›¾ç‰‡ä»¤ç‰Œæ•°çš„å…¬å¼çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è®¡ç®—æˆæœ¬éƒ¨åˆ†ã€‚
å¸¦æœ‰ Vision çš„ GPT-4 èƒ½ç†è§£å›¾åƒå…ƒæ•°æ®å—ï¼Ÿ
ä¸ï¼Œæ¨¡å‹ä¸æ¥æ”¶å›¾åƒå…ƒæ•°æ®ã€‚
å¦‚æœæˆ‘çš„å›¾åƒä¸æ¸…æ¥šæ€ä¹ˆåŠï¼Ÿ
å¦‚æœå›¾åƒæ¨¡ç³Šä¸æ¸…ï¼Œæ¨¡å‹ä¼šå°½åŠ›è§£è¯»å®ƒã€‚ä½†ç»“æœå¯èƒ½ä¸å¤ªå‡†ç¡®ã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œå¦‚æœæ™®é€šäººæ— æ³•åœ¨ä½/é«˜åˆ†è¾¨ç‡æ¨¡å¼ä¸‹çœ‹åˆ°å›¾åƒä¸­çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæ¨¡å‹ä¹ŸåŒæ ·æ— æ³•çœ‹åˆ°ã€‚


****
OpenAI Dall-e æ ¼å¼
Nano-banana(Editså…¼å®¹)
POST
/v1/images/edits
æœ€åä¿®æ”¹æ—¶é—´ï¼š
å¤§çº¦ 1 ä¸ªæœˆå‰
Nano-banana å’Œ gemini-2.5-flash-image-preview çš„åŒºåˆ«
gemini-2.5-flash-image-preview å®˜æ–¹çš„apiæ¨¡å‹ï¼Œæ²¡åšä»»ä½•å¤„ç†ï¼Œä»…æ”¯æŒèŠå¤©æ¥å£ï¼Œå¯èƒ½ä¸ä¼šè¿”å›å›¾ç‰‡ï¼Œè¿”å›çš„å›¾ç‰‡æ˜¯ base64
nano-banana æˆ‘ä»¬åŸºäº gemini-2.5-flash-image-preview ä¸“é—¨ç”»å›¾ä¼˜åŒ–çš„apiæ¨¡å‹ï¼Œæ”¯æŒ dalle æ ¼å¼ã€è¿”å›urlï¼Œå¤±è´¥ä¸æ‰£è´¹ï¼Œä¼˜åŒ–äº†æ”¯æŒè®¾ç½®å›¾ç‰‡æ¯”ä¾‹
nano-banana-hd æ˜¯é«˜æ¸…ç‰ˆ4Kç”»è´¨
è¯·æ±‚å‚æ•°
Header å‚æ•°
Authorization
string 
å¯é€‰
é»˜è®¤å€¼:
Bearer {{YOUR_API_KEY}}
Body å‚æ•°multipart/form-data
model
string 
å¿…éœ€
ç¤ºä¾‹:
nano-banana
prompt
string 
å¿…éœ€
ç¤ºä¾‹:
ä¸€åªçŒ«
image
file 
å¿…éœ€
æ”¯æŒå¤šå›¾æˆ–ä¸å¸¦å‚è€ƒå›¾
ç¤ºä¾‹:
["file://E:\\Downloads\\1745936044575403500.png","file://E:\\Downloads\\å¾®ä¿¡å›¾ç‰‡_20250826114255_1785.jpg"]
response_format
string 
å¯é€‰
url æˆ– b64_json
ç¤ºä¾‹:
url
aspect_ratio
enum<string> 
å¯é€‰
æšä¸¾å€¼:
1:1
2:3
3:2
3:4
4:3
4:5
5:4
9:16
16:9
21:9
image_size
enum<string> 
å¯é€‰
ä»… nano-banana-2 æ”¯æŒ
æšä¸¾å€¼:
1K
2K
4K
ç¤ºä¾‹:
4K


var myHeaders = new Headers();
myHeaders.append("Authorization", "Bearer {{YOUR_API_KEY}}");

var formdata = new FormData();
formdata.append("model", "nano-banana");
formdata.append("prompt", "ä¸€åªçŒ«");
formdata.append("image", fileInput.files[0], "E:\Downloads\1745936044575403500.png");
formdata.append("image", fileInput.files[0], "E:\Downloads\å¾®ä¿¡å›¾ç‰‡_20250826114255_1785.jpg");
formdata.append("response_format", "url");
formdata.append("aspect_ratio", "");
formdata.append("image_size", "4K");

var requestOptions = {
   method: 'POST',
   headers: myHeaders,
   body: formdata,
   redirect: 'follow'
};

fetch("/v1/images/edits", requestOptions)
   .then(response => response.text())
   .then(result => console.log(result))
   .catch(error => console.log('error', error));


è¿”å›å“åº”
ğŸŸ¢200
æˆåŠŸ
application/json
object
 

ç¤ºä¾‹
{}

